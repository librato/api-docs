<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" type="image/x-icon" href="images/favicon-blue.ico">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="stylesheets/librato.css" rel="stylesheet" type="text/css" media="screen" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic,300,300italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","ruby","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <header class="header">
      <div class="navbar navbar-default navbar-static-top homenav" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <a href="https://www.librato.com/"><img src="images/librato-logo-white.svg" alt="Librato" class="logo"></a>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li><a href="https://www.librato.com/product">product</a></li>
              <li><a href="https://www.librato.com/customers">customers</a></li>
              <li><a href="https://www.librato.com/pricing">pricing</a></li>
              <li><a href="https://www.librato.com/docs/kb/" class="active">documentation</a></li>
              <li class="noborder"><a href="http://blog.librato.com/">blog</a></li>
              <li class="noborder"><a href="https://metrics.librato.com/users/sign_in" class="btn btn-default btn-sign_in">sign in</a></li>
              <li class="noborder">
                <a href="https://metrics.librato.com/sign_up" class="btn btn-primary btn-sign_up btn-sign_up-pricing">try it</a>
              </li>
            </ul>

          </div><!--/.nav-collapse -->

         </div>

        </div>
        <div class="sub-nav">
            <ul class="sub-nav-links">
              <li><a href="https://www.librato.com/docs/kb/">Knowledge Base</a></li>
              <li class="active"><a href="https://www.librato.com/docs/api/">API Documentation</a></li>
            </ul>
            <div class="search-box">
              <div class="search">
                 <span class="icon"><i class="fa fa-search"></i></span>
                 <input type="text" class="search" id="input-search" placeholder="Search">
              </div>
            </div>
          </div>
      </div>

        <ul class="search-results"></ul>

    </header>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="python">Python</a>
        </div>

      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<h3 class="side">API Libraries</h3>

<blockquote>
<p>There are many <a href="https://www.librato.com/product/collection-agents">collection agents and language bindings for Librato</a>. This guide includes examples for the <a href="https://github.com/librato/librato-metrics">Ruby</a> and <a href="https://github.com/librato/python-librato">Python</a> libraries.</p>
</blockquote>

<h3 class="side example">Quick Start</h3>

<blockquote>
<p>This example covers submitting and retrieving measurements from a specific metric. View the <a href="#metrics">Metrics section</a> for more information on metric measurements and metadata.</p>

<p>Submit a measurement for the gauge metric <code class="prettyprint">cpu</code>:</p>

<p>JSON</p>
</blockquote>
<pre class="highlight shell"><code>curl -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
     -d <span class="nv">$'</span>
     <span class="o">{</span>
       <span class="s2">"gauges"</span>: <span class="o">[</span>
         <span class="o">{</span>
           <span class="s2">"name"</span>: <span class="s2">"cpu"</span>,
           <span class="s2">"value"</span>: 75,
           <span class="s2">"source"</span>: <span class="s2">"my.machine"</span>
         <span class="o">}</span>
       <span class="o">]</span>
     <span class="o">}</span><span class="s1">' \
    -X POST \
    https://metrics-api.librato.com/v1/metrics
</span></code></pre>

<blockquote>
<p>Form Encoded</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'gauges[0][name]=cpu'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[0][value]=75'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[0][source]=my.machine'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  https://metrics-api.librato.com/v1/metrics
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LIBRATO_USERNAME'</span><span class="p">],</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LIBRATO_TOKEN'</span><span class="p">]</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">cpu: </span><span class="p">{</span><span class="ss">source: </span><span class="s1">'my.machine'</span><span class="p">,</span> <span class="ss">value: </span><span class="mi">75</span><span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="s">"cpu"</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">'my.machine'</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Retrieve the last 5 measurements from the metric <code class="prettyprint">cpu</code> at a resolution of 60 seconds. This will return measurement data along with metric metadata.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/cpu?count=5&amp;resolution=60'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LIBRATO_USERNAME'</span><span class="p">],</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LIBRATO_TOKEN'</span><span class="p">]</span>
<span class="n">metric</span> <span class="o">=</span> <span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_metric</span> <span class="ss">:cpu</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">5</span><span class="p">,</span> <span class="ss">resolution: </span><span class="mi">60</span>
<span class="nb">puts</span> <span class="n">metric</span><span class="p">[</span><span class="s2">"measurements"</span><span class="p">]</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"cpu"</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
</code></pre>

<p>Welcome to the official reference for the Librato
Application Programming Interface (API). Detailed documentation for authentication and each individual API call can
be accessed through the menu.</p>

          <h1 id="authentication">Authentication</h1>

<blockquote>
<p>A user with an email address <code class="prettyprint">example@librato.com</code> and an API token of <code class="prettyprint">75AFDB82</code> will use the following command:</p>
</blockquote>
<pre class="highlight shell"><code>curl -u example@librato.com:75AFDB82 https://metrics-api.librato.com/v1/metrics
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="n">example</span><span class="vi">@librato</span><span class="p">.</span><span class="nf">com</span><span class="p">,</span> <span class="mi">75</span><span class="no">AFDB82</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'email'</span><span class="p">,</span> <span class="s">'token'</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Or you may include the credentials in the URL (see the note about URL Encoding below):</p>
</blockquote>
<pre class="highlight plaintext"><code>curl https://example%40librato.com:75AFDB82@metrics-api.librato.com/v1/metrics
</code></pre>

<blockquote>
<p>Note: API Tokens have been shortened for the purposes of this documentation. Your real API token will be longer.</p>
</blockquote>

<p>The API requires <a href="http://en.wikipedia.org/wiki/Basic_access_authentication">HTTP basic
authentication</a>
for every request. All requests must be sent over HTTPS.</p>

<p>Authentication is accomplished with a <em>user</em> and <em>token</em>
pair. <em>User</em> is the email address that you used to create your
Librato Metrics account and <em>token</em> is the API token that can be
found <a href="https://metrics.librato.com/tokens">on your account page</a>.</p>

<h3 id="url-encoding">URL Encoding</h3>

<blockquote>
<p>To use URL encoding, use the following format:</p>
</blockquote>
<pre class="highlight plaintext"><code>https://user:token@metrics-api.librato.com/v1/metrics
</code></pre>

<blockquote>
<p>Because the <code class="prettyprint">user</code> value is an email address, it has to be escaped in order to form a valid URL. The <code class="prettyprint">@</code> sign is represented by the <code class="prettyprint">%40</code> entity. For example:</p>
</blockquote>
<pre class="highlight plaintext"><code>https://example%40librato.com:apitoken@metrics-api.librato.com/v1/metrics
</code></pre>

<blockquote>
<p>Note: cURL automatically converts the <code class="prettyprint">@</code> to a <code class="prettyprint">%40</code> if you use the <code class="prettyprint">-u</code> option, but not if you put authentication in the URL directly.</p>
</blockquote>

<p>You can also include your <code class="prettyprint">user</code> and <code class="prettyprint">token</code> credentials in the URL with most clients.</p>

          <h1 id="response-codes-amp-errors">Response Codes &amp; Errors</h1>

<h2 id="http-status-codes">HTTP Status Codes</h2>

<p>The Librato API returns one of the following status codes for every request.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request was processed successfully and the information is returned in the body in the desired format. This code gets returned after GET requests or PUT requests (if the PUT resulted in data being generated and returned). In case of a search (e.g. for metrics) without search results, a 200 still gets returned.</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>The request was processed successfully. The resource was created and the <code class="prettyprint">Location</code> variable in the header points to the resource. This code gets returned after POST requests only.</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td>The request was processed successfully. Since this code gets returned after PUT or DELETE requests only, there is no need for returning information in the response body.</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>The request could not be parsed or the parameters were not valid. The request should be modified before resubmitting.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Challenges the user to provide authentication credentials.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>The request was not encrypted via SSL or the account is rate limited.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>The request refers to a resource that either does not exist or the user does not have permissions to access (due to security through obscurity). If a search request gets sent, it will however not return a 404 if the API did not find resources matching the search query.</td>
</tr>
<tr>
<td>415</td>
<td>Incorrect Content-Type</td>
<td>Content type was not application/json.</td>
</tr>
<tr>
<td>422</td>
<td>Entity Already Exists</td>
<td>An attempt was made to create a new entity that matched an existing one. The request should be modified to use unique parameters (e.g., a different container name) or a PUT request should be made instead to modify the existing entity.</td>
</tr>
<tr>
<td>429</td>
<td>Rate Limited</td>
<td>Request was rate limited (it&rsquo;s possible some data was permitted, need to verify response body).<br><br>If creating a <a href="#measurements">measurement</a>, this error returns when it can not parse the basic format of the payload to identify measurements.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>In the rare occasion that we must put the API into maintenance mode for a service upgrade, the API can return a 503 error code. The API should be available again shortly so it is advised that you resubmit your request later.</td>
</tr>
</tbody></table>

<h2 id="error-messages">Error Messages</h2>

<blockquote>
<p>Example of a <code class="prettyprint">request</code> type error message.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"Please use secured connection through https!"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Please provide credentials for authentication."</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The API reports errors in a JSON format which makes it easier to parse and evaluate them.</p>

<h3 id="error-message-structure">Error Message Structure</h3>

<p>There are three types of errors: <code class="prettyprint">params</code>, <code class="prettyprint">request</code>, and <code class="prettyprint">system</code>.</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td>Errors related to parameters are reported based on the attribute the error occurred on.</td>
</tr>
<tr>
<td>requests</td>
<td>Errors related to the request itself are reported in an array structure with the key <code class="prettyprint">request</code>.</td>
</tr>
<tr>
<td>system</td>
<td>Service errors due to maintenance periods, for example, are reported in an array structure with the key <code class="prettyprint">system</code>.</td>
</tr>
</tbody></table>

          <h1 id="metrics">Metrics</h1>

<p>Metrics are custom measurements stored in Librato&rsquo;s Metrics service. These measurements are created and may be accessed programmatically through a set of RESTful API calls. There are currently two types of metrics that may be stored in Librato Metrics, <code class="prettyprint">gauges</code> and <code class="prettyprint">counters</code>.</p>

<h3 id="gauges">Gauges</h3>

<p>Gauges capture a series of measurements where each measurement represents the value under observation at one point in time. The value of a gauge typically varies between some known minimum and maximum. Examples of gauge measurements include the requests/second serviced by an application, the amount of available disk space, the current value of $AAPL, etc.</p>

<h3 id="counters">Counters</h3>

<p>Counters track an increasing number of occurrences of some event. A counter is unbounded and always monotonically increasing in any given run. A new run is started anytime that counter is reset to zero. Examples of counter measurements include the number of connections made to an app, the number of visitors to a website, the number of a times a write operation failed, etc.</p>

<h3 id="metric-properties">Metric Properties</h3>

<p>Some common properties are supported across all types of metrics:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Each metric has a name that is unique to its class of metrics e.g. a gauge name must be unique among gauges. The name identifies a metric in subsequent API calls to store/query individual measurements and can be up to 255 characters in length. Valid characters for metric names are <code class="prettyprint">A-Za-z0-9.:-_</code>. The metric namespace is case insensitive.</td>
</tr>
<tr>
<td>period</td>
<td>The <code class="prettyprint">period</code> of a metric is an integer value that describes (in seconds) the standard reporting period of the metric. Setting the period enables Metrics to detect abnormal interruptions in reporting and aids in analytics.</td>
</tr>
<tr>
<td>description</td>
<td>The description of a metric is a string and may contain spaces. The description can be used to explain precisely what a metric is measuring, but is not required. This attribute is not currently exposed in the Librato UI.</td>
</tr>
<tr>
<td>display_name</td>
<td>More descriptive name of the metric which will be used in views on the Metrics website. Allows more characters than the metric <code class="prettyprint">name</code>, including spaces, parentheses, colons and more.</td>
</tr>
<tr>
<td>attributes</td>
<td>The <a href="#metric-attributes">attributes hash</a> configures specific components of a metric&rsquo;s visualization.</td>
</tr>
<tr>
<td>source_lag</td>
<td>This property sets a &ldquo;look back&rdquo; further in the data stream when rendering a composite metric for the purposes of alerting.  The default is 120, meaning we look back 2 minutes when rendering, which should normally be enough time for the appropriate sources to have reported their data.</td>
</tr>
</tbody></table>

<h3 id="measurement-properties">Measurement Properties</h3>

<p>Each individual metric corresponds to a series of individual measurements. Some common properties are supported across all measurements.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">measure_time</code></td>
<td>The epoch time at which an individual measurement occurred with a maximum resolution of seconds.</td>
</tr>
<tr>
<td><code class="prettyprint">value</code></td>
<td>The numeric value of an individual measurement. Multiple formats are supported (e.g. integer, floating point, etc) but the value must be numeric.</td>
</tr>
<tr>
<td><code class="prettyprint">source</code></td>
<td>Source is an optional property that can be used to subdivide a common gauge/counter among multiple members of a population. For example the number of requests/second serviced by an application could be broken up among a group of server instances in a scale-out tier by setting the hostname as the value of source.</td>
</tr>
</tbody></table>

<p>Source names can be up to 255 characters in length and must be composed of the characters <code class="prettyprint">A-Za-z0-9.:-_</code>. The word all is a reserved word and cannot be used as a user source. The source namespace is case insensitive.</p>

<h3 id="measurement-restrictions">Measurement Restrictions</h3>

<p>Internally all floating point values are stored in double-precision format. However, Librato Metrics places the following restrictions on very large or very small floating point exponents:</p>

<ul>
<li><p>If the base-10 exponent of any floating point value is larger than <code class="prettyprint">1 x 10^126</code>, the request will be aborted with a 400 status error code.</p></li>
<li><p>If the base-10 exponent of any floating point value is smaller than <code class="prettyprint">1 x 10^-130</code>, the value will be truncated to zero (0.0).</p></li>
</ul>

<h2 id="create-a-metric">Create a Metric</h2>

<blockquote>
<p>How to create 3 new measurements: Two counter measurements (<code class="prettyprint">conn_servers</code> and <code class="prettyprint">write_fails</code>) and one gauge measurement (<code class="prettyprint">cpu_temp</code>).</p>

<p>The gauge measurement specifies an explicit <code class="prettyprint">measure_time</code> and <code class="prettyprint">source</code> that overrides the global ones while the counter measurements default to the global <code class="prettyprint">measure_time</code> and <code class="prettyprint">source</code>.</p>

<p>JSON</p>
</blockquote>
<pre class="highlight shell"><code>curl -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
     -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
     -d <span class="nv">$'</span>
     <span class="o">{</span>
       <span class="s2">"measure_time"</span>: 1481637660,
       <span class="s2">"source"</span>: <span class="s2">"my.app"</span>,
       <span class="s2">"gauges"</span>: <span class="o">[</span>
         <span class="o">{</span>
           <span class="s2">"name"</span>: <span class="s2">"my.metric"</span>,
           <span class="s2">"value"</span>: 42
         <span class="o">}</span>,
         <span class="o">{</span>
           <span class="s2">"name"</span>: <span class="s2">"my.other.metric"</span>,
           <span class="s2">"value"</span>: 43
         <span class="o">}</span>,
         <span class="o">{</span>
           <span class="s2">"name"</span>: <span class="s2">"cpu"</span>,
           <span class="s2">"value"</span>: 88.4,
           <span class="s2">"source"</span>: <span class="s2">"my.machine"</span>,
           <span class="s2">"measure_time"</span>: 1481637540
         <span class="o">}</span>
       <span class="o">]</span>
     <span class="o">}</span><span class="s1">' \
    -X POST \
    https://metrics-api.librato.com/v1/metrics
</span></code></pre>

<blockquote>
<p>Form Encoded</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'measure_time=1481637660'</span> <span class="se">\</span>
  -d <span class="s1">'source=my.app'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[0][name]=my.metric'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[0][value]=42'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[1][name]=my.other.metric'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[1][value]=43'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[2][name]=cpu'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[2][value]=88.4'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[2][source]=my.machine'</span> <span class="se">\</span>
  -d <span class="s1">'gauges[2][measure_time]=1481637540'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  https://metrics-api.librato.com/v1/metrics
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="n">queue</span> <span class="o">=</span> <span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Queue</span><span class="p">.</span><span class="nf">new</span>
<span class="n">queue</span><span class="p">.</span><span class="nf">add</span> <span class="ss">:conn_servers</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:counter</span><span class="p">,</span> <span class="ss">:measure_time</span> <span class="o">=&gt;</span> <span class="mi">1234567950</span><span class="p">,</span> <span class="ss">:value</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">queue</span><span class="p">.</span><span class="nf">add</span> <span class="ss">:write_fails</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:counter</span><span class="p">,</span> <span class="ss">:measure_time</span> <span class="o">=&gt;</span> <span class="mi">1234567950</span><span class="p">,</span> <span class="ss">:value</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">queue</span><span class="p">.</span><span class="nf">add</span> <span class="ss">:cpu_temp</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:measure_time</span> <span class="o">=&gt;</span> <span class="mi">1234567949</span><span class="p">,</span> <span class="ss">:value</span> <span class="o">=&gt;</span> <span class="mi">88</span><span class="o">.</span><span class="mi">4</span><span class="p">}</span>
<span class="n">queue</span><span class="p">.</span><span class="nf">submit</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">q</span>  <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">new_queue</span><span class="p">()</span>
<span class="n">q</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">'conn_servers'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">'counter'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">'prod-us-west'</span><span class="p">)</span>
<span class="n">q</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">'write_fails'</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">'counter'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">'prod-us-west'</span><span class="p">)</span>
<span class="n">q</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">'cpu_temp'</span><span class="p">,</span> <span class="mf">88.4</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">'gauge'</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">'prod-us-east'</span><span class="p">)</span>
<span class="n">q</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Response Code:</p>
</blockquote>
<pre class="highlight plaintext"><code>200 Success
</code></pre>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/metrics</code></p>

<p>This action allows you to create metrics and submit measurements for new or existing metrics. You can submit measurements for multiple metrics in a single request.</p>

<p>For each counter and gauge measurement in the request, a new measurement is created and associated with the appropriate metric. If any of the metrics in the submitted set do not currently exist, they will be created.</p>

<p>For truly large numbers of measurements (e.g. 20 metrics x 500 sources) we suggest batching into multiple concurrent requests. Currently a POST with ~300 distinct measurements takes roughly 600ms, so we recommend this as an initial guideline for a cap on request size. As we continue to tune the system this suggested cap will be updated.</p>

<h3 id="headers">Headers</h3>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h3 id="measurement-parameters">Measurement Parameters</h3>

<p>The request must include at least one gauge or counter measurement. It may include multiple counter or gauge measurements or a combination of multiple measurement types.</p>

<p>Gauge measurements are collated under the top-level parameter <code class="prettyprint">gauges</code>. Similarly, counter measurements are collated under the top-level parameter key <code class="prettyprint">counters</code>. Each measurement is a hash of measurement parameters as described below:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>The unique identifying name of the property being tracked. The metric name is used both to create new measurements and query existing measurements. Must be 255 or fewer characters, and may only consist of &lsquo;A-Za-z0-9.:-_&rsquo;. Depending on the submission format the location of the name parameter may vary, see examples below in &ldquo;Measurement Formats&rdquo;. The metric namespace is case insensitive.</td>
</tr>
<tr>
<td>value</td>
<td>The numeric value of a single measured sample.</td>
</tr>
<tr>
<td>measure_time<br><code class="prettyprint">optional</code></td>
<td>The integer value of the <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> of the measurement. If not specified will default to time the measurement is received.</td>
</tr>
<tr>
<td>source<br><code class="prettyprint">optional</code></td>
<td>A string which describes the originating source of a measurement when that measurement is tracked across multiple members of a population. Examples: foo.bar.com, user-123, 77025. <br><br>Sources must be composed of &#39;A-Za-z0-9.:-<em>&rsquo; and can be up to 255 characters in length. The word all is reserved and cannot be used as user source. The source namespace is case insensitive. <br><br><code class="prettyprint">source</code> and <code class="prettyprint">measure_time</code> can also be specified as a parameters outside of the <code class="prettyprint">gauges</code> and <code class="prettyprint">counters</code> measurement hashes. In this case the given <code class="prettyprint">source</code> and <code class="prettyprint">measure_time</code> values will be applied to all values submitted unless those measurements have another <code class="prettyprint">source</code> or `measure</em>time` specified in their sub-hashes. <br><br><strong>NOTE</strong>: The <a href="#update-a-metric">optional parameters</a> listed in the metrics PUT operation can be used with POST operations, but they will be ignored if the metric already exists. To update existing metrics, please use the PUT operation.</td>
</tr>
</tbody></table>

<h3 id="gauge-specific-parameters">Gauge Specific Parameters</h3>

<p>Gauges support an optional, more complex parameter set which you can use to report multi-sample measurements:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>Indicates the request corresponds to a multi-sample measurement. This is useful if measurements are taken very frequently in a closed loop and the metric value is only periodically reported. If <code class="prettyprint">count</code> is set, then <code class="prettyprint">sum</code> must also be set in order to calculate an average value for the recorded metric measurement. Additionally <code class="prettyprint">min</code>, <code class="prettyprint">max</code>, and <code class="prettyprint">sum_squares</code> may also be set when <code class="prettyprint">count</code> is set. The <code class="prettyprint">value</code> parameter should not be set if <code class="prettyprint">count</code> is set.</td>
</tr>
<tr>
<td>sum</td>
<td>If <code class="prettyprint">count</code> was set, <code class="prettyprint">sum</code> must be set to the summation of the individual measurements. The combination of <code class="prettyprint">count</code> and <code class="prettyprint">sum</code> are used to calculate an average value for the recorded metric measurement.</td>
</tr>
<tr>
<td>max</td>
<td>If <code class="prettyprint">count</code> was set, <code class="prettyprint">max</code> can be used to report the largest individual measurement among the averaged set.</td>
</tr>
<tr>
<td>min</td>
<td>If <code class="prettyprint">count</code> was set, <code class="prettyprint">min</code> can be used to report the smallest individual measurement among the averaged set.</td>
</tr>
<tr>
<td>sum_squares</td>
<td>If <code class="prettyprint">count</code> was set, <code class="prettyprint">sum_squares</code> report the summation of the squared individual measurements. If <code class="prettyprint">sum_squares</code> is set, a standard deviation can be calculated for the recorded metric measurement.</td>
</tr>
</tbody></table>

<h3 id="measurement-formats">Measurement Formats</h3>

<p>The individual gauge and counter measurements can be specified in one of several formats:</p>

<h3 id="hashed-by-name">Hashed by Name</h3>

<blockquote>
<p>The JSON payload below creates a gauge measurement for the gauge <code class="prettyprint">login-delay</code> with a value <code class="prettyprint">3.5</code>:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"gauges"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"login-delay"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.5</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.bar.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each metric name is a hash to the measurement values.</p>

<h3 id="multiple-measurements-with-the-same-name">Multiple measurements with the same name</h3>

<blockquote>
<p>How to create two measurements for the gauge <code class="prettyprint">login-delay</code>: one with the source <code class="prettyprint">foo1.bar.com</code> and a second with <code class="prettyprint">foo2.bar.com</code>:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"gauges"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"0"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login-delay"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.5</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo1.bar.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login-delay"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.6</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo2.bar.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>If you would like to specify two measurements for the same gauge (maybe to specify two different sources), you can specify a name parameter within the measurement that overrides the hash key name.</p>

<h3 id="array-format-json-only">Array format (JSON only)</h3>

<blockquote>
<p>The following JSON payload will create the same measurements as the previous example:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"gauges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login-delay"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.5</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo1.bar.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login-delay"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.6</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo2.bar.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>If the submission Content-Type is JSON, you can also specify the measurement parameters in an array format. This is only supported in JSON formats since the URL-encoded-form content type does not support an array format.</p>

<h2 id="retrieve-a-metric">Retrieve a Metric</h2>

<p>The Librato API lets you search for metric metadata and measurements within the system. For example, you could
query a list of all available metrics in the system or those matching a specific naming pattern. When retrieving the
measurements of a specific metric you can specify a specific time range or limit the amount of data points returned.</p>

<h3 id="metric-measurement-queries">Metric Measurement Queries</h3>

<blockquote>
<p>Retrieve all metrics containing <code class="prettyprint">request</code> in the metric name:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics?name=request'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">metrics</span> <span class="nb">name</span><span class="ss">:'request'</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">list_metrics</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"request"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response (when one of the two metrics measure requests):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_requests"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_requests"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTTP requests serviced by the app per-minute"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"counter"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Requests"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reqs"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>In order to retrieve <strong>measurements</strong> from a specific metric, include the <code class="prettyprint">name</code> parameter along with the metric name you wish to view measurement data from.</p>

<p><code class="prettyprint">https://metrics-api.librato.com/v1/metrics?name=metric_name</code></p>

<h3 id="retrieve-a-metric-by-name">Retrieve a Metric by Name</h3>

<blockquote>
<p>How to retrieve the metadata for the metric <code class="prettyprint">cpu_temp</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/cpu_temp'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_metric</span> <span class="ss">:cpu_temp</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"cpu_temp"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current CPU temperature in Fahrenheit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fahrenheit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>How to return the metric <code class="prettyprint">cpu_temp</code> with up to four measurements at resolution 60:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/cpu_temp?count=4&amp;resolution=60'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_metric</span> <span class="ss">:cpu_temp</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">4</span><span class="p">,</span> <span class="ss">resolution: </span><span class="mi">60</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"cpu_temp"</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"resolution"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"measurements"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"server1.acme.com"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">84.5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567950</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">86.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234568010</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">84.6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234568070</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">89.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current CPU temperature in Fahrenheit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fahrenheit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns information for a specific metric. If time interval search parameters are specified will also include a set of metric measurements for the given time span.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/metrics/:name</code></p>

<h3 id="measurement-search-parameters">Measurement Search Parameters</h3>

<blockquote>
<p>How to return the metric <code class="prettyprint">cpu_temp</code> with measurements from the source <code class="prettyprint">server*</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/cpu_temp?source=server*&amp;count=4&amp;resolution=60'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_metric</span> <span class="ss">:cpu_temp</span><span class="p">,</span> <span class="ss">source: :server</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">4</span><span class="p">,</span> <span class="n">resolution</span><span class="p">:</span><span class="mi">60</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"cpu_temp"</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s">"server*"</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"resolution"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"measurements"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"server1.acme.com"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">84.5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">86.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">84.6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">89.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"server2.acme.com"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">94.5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">96.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">94.6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">99.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current CPU temperature in Fahrenheit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fahrenheit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Return the metric <code class="prettyprint">cpu_temp</code> with measurements from an array of sources, including server1.acme.com or server2.acme.com:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/cpu_temp?sources%5B%5D=server1.acme.com&amp;sources%5B%5D=server2.acme.com&amp;count=4&amp;resolution=60'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_metric</span> <span class="ss">:cpu_temp</span><span class="p">,</span> <span class="ss">sources: </span><span class="p">[</span><span class="s1">'server1.acme.com'</span><span class="p">,</span> <span class="s1">'server2.acme.com'</span><span class="p">],</span> <span class="ss">count: </span><span class="mi">4</span><span class="p">,</span> <span class="ss">resolution: </span><span class="mi">60</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"cpu_temp"</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="s">'server1.acme.com'</span><span class="p">,</span> <span class="s">'server2.acme.com'</span><span class="p">],</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"resolution"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"measurements"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"server1.acme.com"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">84.5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">86.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">84.6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">89.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"server2.acme.com"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">94.5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">96.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">94.6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">99.7</span><span class="p">,</span><span class="w">
        </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current CPU temperature in Fahrenheit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fahrenheit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>If optional <a href="#time-intervals">time interval search parameters</a> are specified, the response includes the set of metric measurements covered by the time interval. Measurements are listed by their originating source name if one was specified when the measurement was created. All measurements that were created without an explicit source name are listed with the source name <code class="prettyprint">unassigned</code>.</p>

<table><thead>
<tr>
<th>Search Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>source</td>
<td>If <code class="prettyprint">source</code> is specified, the response is limited to measurements from the given source name or pattern.</td>
</tr>
<tr>
<td>sources</td>
<td>If <code class="prettyprint">sources</code> is specified, the response is limited to measurements from those sources. The sources parameter should be specified as an array of source names. The response is limited to the set of sources specified in the array.</td>
</tr>
<tr>
<td>summarize_time</td>
<td>If <code class="prettyprint">summarize_time</code> is specified, then the individual measurements over the covered time period will be aggregated into a single summarized record for each source. In this case, the measurements array for each source will contain a single summarized record. <br><br>The <code class="prettyprint">measure_time</code> in each of the summarized measurements will be set to the first <code class="prettyprint">measure_time</code> in the period covered by the <a href="#time-intervals">time interval search parameters</a>. <br><br>If the metric is a counter, then the summarized record will be a gauge that represents the summarization of the deltas of the counter values for each source.</td>
</tr>
<tr>
<td>summarize_sources</td>
<td>If <code class="prettyprint">summarize_sources</code> is specified, a source name <code class="prettyprint">all</code> is included in the list of measurements. This special source name will include all measurements summarized across all the sources for each point in time. For each unique point in time within the covered time interval search, there will be a single record in the <code class="prettyprint">all</code> measurements list. <br><br>If multiple sources published a measurement at the same time, the record in the <code class="prettyprint">all</code> list will be a summarized record of all the individual source measurements at that point in time. If combined with the <code class="prettyprint">summarize_time</code> parameter, then the <code class="prettyprint">all</code> list will be summarized across sources and across time, implying it will be a list with a single record. <br><br>If the metric is a counter, then the summarized record will be a gauge that represents the summarization of the deltas of the counter values for each source.</td>
</tr>
<tr>
<td>breakout_sources</td>
<td>When <code class="prettyprint">summarize_sources</code> is specified with multiple sources (and the <code class="prettyprint">all</code> series is generated) by default the individual source series are also included in the response. Setting <code class="prettyprint">breakout_sources</code> to <code class="prettyprint">false</code> will reduce the response to only the <code class="prettyprint">all</code> series. This reduces resource consumption when the individual series are not needed.</td>
</tr>
<tr>
<td>group_by</td>
<td>When querying a gauge and specifying multiple sources with the <code class="prettyprint">sources</code> parameter the <code class="prettyprint">group_by</code> parameter optionally specifies a statistical function used to generate an aggregated time series across sources identified in the response with the special source name <code class="prettyprint">all</code>. The acceptable values for <code class="prettyprint">group_by</code> are: <code class="prettyprint">min</code>, <code class="prettyprint">max</code>, <code class="prettyprint">mean</code>, <code class="prettyprint">sum</code>, <code class="prettyprint">count</code>. <br><br>Each entry in the <code class="prettyprint">all</code> series contains a set of summary statistics, each of which represents the result of applying the <code class="prettyprint">group_by</code> function across that summary statistic in the corresponding entry in each the individual sources. For example when <code class="prettyprint">group_by</code> is set to <code class="prettyprint">max</code>, each entry in the <code class="prettyprint">all</code> series specifies the minimum of the maximums as <code class="prettyprint">min</code>, the maximum of the maximums as <code class="prettyprint">max</code>, the maximum of the sums as <code class="prettyprint">sum</code>, etc. <br><br>Regardless of the function specified for <code class="prettyprint">group_by</code> each entry in <code class="prettyprint">all</code> also includes a field named <code class="prettyprint">summarized</code> that communicates how many individual source series were grouped at that point in time and a field named <code class="prettyprint">count</code> that contains the total number of samples aggregated across all sources at that point in time. <br><br>Setting the <code class="prettyprint">group_by</code> option implies both <code class="prettyprint">summarize_sources=true</code> (required) and <code class="prettyprint">breakout_sources=false</code> (can be optionally overridden).</td>
</tr>
</tbody></table>

<h3 id="composite-metric-queries">Composite Metric Queries</h3>

<blockquote>
<p>Execute a composite query to derive the idle collectd CPU time for a given host:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics?compose=derive(s("collectd.cpu.*.idle","boatman*45"))&amp;start_time=1432931007&amp;resolution=60'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_composite</span> <span class="s1">'derive(s("collectd.cpu.*.idle","boatman*45"))'</span><span class="p">,</span> <span class="ss">start_time: </span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span> <span class="o">-</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span> <span class="ss">resolution: </span><span class="mi">60</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">compose</span> <span class="o">=</span> <span class="s">'derive(s("collectd.cpu.*.idle", "boatman*45", {period: "60"}))'</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="mi">1432931007</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_composite</span><span class="p">(</span><span class="n">compose</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">)</span>
<span class="n">resp</span><span class="p">[</span><span class="s">'measurements'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'series'</span><span class="p">]</span>
</code></pre>

<blockquote>
<p>Response (the result of the <code class="prettyprint">derive()</code> function over the idle CPU time):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"compose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"derive(s(\"collectd.cpu.*.idle\",\"boatman*19\"))"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"measurements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"aggregate"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collectd-Librato.py/0.0.8 (Linux; x86_64) Python-Urllib2/2.7"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Units"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"gap_detection"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collectd.cpu.0.cpu.idle"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"counter"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
      </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collectd.cpu.*.idle"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boatman*19"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"series"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1395802200</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">5831.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"measure_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1395802620</span><span class="p">,</span><span class="w">
          </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">5748.0</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boatman-stg_19"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"resolution"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This route will also execute a <a href="https://www.librato.com/docs/kb/manipulate/composite_metrics/specification.html">composite metric query</a> string when the following parameter is specified. Metric pagination is not performed when executing a composite metric query.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>compose</td>
<td>A composite metric query string to execute. If this parameter is specified it must be accompanied by <a href="#time-intervals">time interval</a> parameters.</td>
</tr>
</tbody></table>

<p><strong>NOTE</strong>: <code class="prettyprint">start_time</code> and <code class="prettyprint">resolution</code> are required. The <code class="prettyprint">end_time</code> parameter is optional. The <code class="prettyprint">count</code> parameter is currently ignored. When specified, the response is a composite metric query response.</p>

<h2 id="time-intervals">Time Intervals</h2>

<p>Librato tracks and stores several different types of measurements as time-series data. Each measurement corresponds to a particular point in time. Queries are typically made to request the values over some time interval that is a subset of the entire series e.g. the last hour, last Monday, etc. The search parameters described below may be used in different combinations to specify a time interval when making queries against <a href="#metrics">metrics</a>.</p>

<h3 id="time-interval-parameters">Time Interval Parameters</h3>

<p>If an explicit interval (i.e. <code class="prettyprint">start_time</code> to <code class="prettyprint">end_time</code>) is specified, the response contains all measurements that fall within the interval. In this scenario the parameter <code class="prettyprint">start_time</code> must be set, while <code class="prettyprint">end_time</code> may be set or left to default to the current time.</p>

<p>An interval can also be implicitly specified through a <code class="prettyprint">count</code> parameter. If <code class="prettyprint">count</code> is set to N alongside with either (but not both) <code class="prettyprint">start_time</code> or <code class="prettyprint">end_time</code>, the response covers the time interval that covers N measurements. The value of <code class="prettyprint">end_time</code> always defaults to the current time, so a request for the last N measurements only requires the <code class="prettyprint">count</code> parameter set to N.</p>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>start_time</td>
<td>The <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> indicating the start time of the desired interval.</td>
</tr>
<tr>
<td>end_time</td>
<td>The <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> indicating the end time of the desired interval. If left unspecified it defaults to the current time.</td>
</tr>
<tr>
<td>count</td>
<td>The number of measurements desired. When specified as N in conjunction with <code class="prettyprint">start_time</code>, the response contains the first N measurements after <code class="prettyprint">start_time</code>. When specified as N in conjunction with <code class="prettyprint">end_time</code>, the response contains the last N measurements before <code class="prettyprint">end_time</code>.</td>
</tr>
<tr>
<td>resolution</td>
<td>A resolution for the response as measured in seconds. If the original measurements were reported at a higher resolution than specified in the request, the response contains averaged measurements.</td>
</tr>
</tbody></table>

<h2 id="pagination">Pagination</h2>

<blockquote>
<p>Return the metric <code class="prettyprint">librato.cpu.percent.idle</code> with the <code class="prettyprint">start_time</code> of 1303252025 (unix time):</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/librato.cpu.percent.idle?resolution=60&amp;start_time=1303252025'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_metric</span> <span class="ss">:librato</span><span class="p">.</span><span class="nf">cpu</span><span class="p">.</span><span class="nf">percent</span><span class="p">.</span><span class="nf">idle</span><span class="p">,</span> <span class="ss">start_time: </span><span class="mi">1303252025</span><span class="p">,</span> <span class="ss">resolution: </span><span class="mi">60</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"librato.cpu.percent.idle"</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="s">"1303252025"</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>If the response includes the following <code class="prettyprint">query</code> section with <code class="prettyprint">next_time</code> it implies there are more points and that <code class="prettyprint">start_time</code> should be set to 1305562061 to retrieve the next matching elements.</p>
</blockquote>
<pre class="highlight json"><code><span class="s2">"query"</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next_time"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1305562061</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Note: In order to receive a <code class="prettyprint">next_time</code> value, ensure you aren&rsquo;t including a <code class="prettyprint">count</code> value in your request.</p>
</blockquote>

<p>If a request does not include an explicit count and the matched data range includes more points than the maximum return size, then the response will include a pagination hint. In this case the response will include a parameter <code class="prettyprint">next_time</code> in the <code class="prettyprint">query</code> top-level response section. The <code class="prettyprint">next_time</code> will be set to the epoch second start time of the next matching element of the original request. This hint serves two purposes:</p>

<p>1) It indicates there are more matching elements, but that the original request was truncated due to the response limit, and</p>

<p>2) It provides the <code class="prettyprint">start_time</code> value that should be used in a subsequent request. If the original request is resubmitted with the <code class="prettyprint">start_time</code> set to the returned <code class="prettyprint">next_time</code> the response will include the next set of matching elements in the set. It may require multiple requests to page through the entire set if the number of matching elements is large.</p>

<h3 id="request-parameters">Request Parameters</h3>

<p>The response is paginated, so the request supports our generic <a href="#pagination5">Pagination Parameters</a>. Specific to metrics, the default and only permissible value of the <code class="prettyprint">orderby</code> pagination parameter is <code class="prettyprint">name</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>A search parameter that limits the results to metrics whose names contain a matching substring. The search is not case-sensitive.</td>
</tr>
</tbody></table>

<h2 id="update-a-metric">Update a Metric</h2>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/metrics</code></p>

<blockquote>
<p>Set the <code class="prettyprint">period</code> and <code class="prettyprint">display_min</code> for metrics <code class="prettyprint">cpu</code>, <code class="prettyprint">servers</code> and <code class="prettyprint">reqs</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'names=cpu&amp;names=servers&amp;names=reqs&amp;period=60&amp;display_min=0'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_metrics</span> <span class="ss">names: </span><span class="p">[</span><span class="s2">"cpu"</span><span class="p">,</span> <span class="s2">"servers"</span><span class="p">,</span> <span class="s2">"reqs"</span><span class="p">],</span> <span class="ss">period: </span><span class="mi">60</span><span class="p">,</span> <span class="ss">display_min: </span><span class="mi">0</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'cpu'</span><span class="p">,</span> <span class="s">'servers'</span><span class="p">,</span> <span class="s">'reqs'</span><span class="p">]:</span>
  <span class="n">gauge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
  <span class="n">attrs</span><span class="p">[</span><span class="s">'period'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'60'</span>
  <span class="n">attrs</span><span class="p">[</span><span class="s">'display_min'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'0'</span>
  <span class="n">api</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Set the <code class="prettyprint">display_units_short</code> for all metrics that end with <code class="prettyprint">.time</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'names=*.time&amp;display_units_short=ms'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_metrics</span> <span class="ss">names: </span><span class="p">[</span><span class="s2">"*.time"</span><span class="p">]</span> <span class="p">,</span> <span class="ss">display_units_short: </span><span class="s2">"ms"</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content OR 202 Accepted
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: &lt;job-checking URI&gt;  # issued only for 202
</code></pre>

<p>Update the <a href="#metrics">properties</a> and/or <a href="#metric-attributes">attributes</a> of a set of metrics at the same time.</p>

<p>This route accepts either a list of metric names OR a single pattern which includes wildcards (<code class="prettyprint">*</code>).</p>

<p>If attributes are included which are specific to gauge metrics and the set of metrics provided includes counter metrics, those attributes will be applied only to the gauge metrics in the set.</p>

<p>There are two potential success states for this action, either a <code class="prettyprint">204 No Content</code> (all changes are complete) or a <code class="prettyprint">202 Accepted</code>.</p>

<p>A <code class="prettyprint">202</code> will be issued when the metric set is large enough that it cannot be operated on immediately. In those cases a <code class="prettyprint">Location</code>: response header will be included which identifies a <a href="#jobs">Job resource</a> which can be monitored to determine when the operation is complete and if it has been successful.</p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h3 id="update-a-metric-by-name">Update a Metric by Name</h3>

<blockquote>
<p>Update the existing metric temp by setting the display_name and the minimum display attribute.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'display_name=Temperature in Celsius&amp;attributes[display_min]=0'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/temp'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_metric</span> <span class="ss">:temp</span><span class="p">,</span> <span class="ss">name: </span><span class="s2">"Temperature in Celsius"</span><span class="p">,</span> <span class="ss">attributes: </span><span class="p">{</span> <span class="ss">display_min: </span><span class="s1">'0'</span> <span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">list_metrics</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"temp"</span><span class="p">):</span>
  <span class="n">gauge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
  <span class="n">attrs</span> <span class="o">=</span> <span class="n">gauge</span><span class="o">.</span><span class="n">attributes</span>
  <span class="n">attrs</span><span class="p">[</span><span class="s">'display_name'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Temperature in Celsius'</span>
  <span class="n">attrs</span><span class="p">[</span><span class="s">'display_min'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'0'</span>
  <span class="n">api</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">metric</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<blockquote>
<p>Create a gauge metric named <code class="prettyprint">queue_len</code> (this assumes the metric does not exist):</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'type=gauge&amp;description=Length of app queue&amp;display_name=num. elements'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/queue_len'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_metric</span> <span class="ss">:queue_len</span><span class="p">,</span> <span class="ss">type: :gauge</span><span class="p">,</span> <span class="ss">display_name: </span><span class="s2">"num. elements"</span><span class="p">,</span> <span class="ss">period: </span><span class="mi">15</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="s">"queue_len"</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/metrics/queue_len
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue_len"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Length of app queue"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"num. elements"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"curl/7.24.0 (x86_64-redhat-linux-gnu) libcurl/7.24.0 NSS/3.13.5.0 zlib/1.2.5 libidn/1.24 libssh2/1.4.1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/metrics/:name</code></p>

<p>Updates or creates the metric identified by <code class="prettyprint">name</code>. If the metric already exists, it performs an update of the metric&rsquo;s properties.</p>

<p>If the metric name does not exist, then the metric will be created with the associated properties. Normally metrics are created the first time a measurement is sent to the <a href="#create-a-metric">collated POST route</a>, after which their properties can be updated with this route. However, sometimes it is useful to set the metric properties before the metric has received any measurements so this will create the metric if it does not exist. The property <code class="prettyprint">type</code> must be set if the metric is to be created.</p>

<p>Creating Persisted Composite Metrics</p>

<p>With this route you can also create and update persisted <a href="https://www.librato.com/docs/kb/manipulate/composite_metrics/specification.html">composite metrics</a>. This allows you to save and use a composite definition as if it was a normal metric. To create a persisted composite set the <code class="prettyprint">type</code> to composite and provide a composite definition in the <code class="prettyprint">composite</code> parameter. A named metric will be created that can be used on instruments or alerts, similar to how you would use a regular metric.</p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<p>Create Parameters</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>Type of metric to create (gauge, counter, or composite).</td>
</tr>
<tr>
<td>display_name<br><code class="prettyprint">optional</code></td>
<td>Name which will be used for the metric when viewing the Metrics website.</td>
</tr>
<tr>
<td>description<br><code class="prettyprint">optional</code></td>
<td>Text that can be used to explain precisely what the gauge is measuring.</td>
</tr>
<tr>
<td>period<br><code class="prettyprint">optional</code></td>
<td>Number of seconds that is the standard reporting period of the metric. Setting the period enables Metrics to detect abnormal interruptions in reporting and aids in analytics. For gauge metrics that have service-side aggregation enabled, this option will define the period that aggregation occurs on.</td>
</tr>
<tr>
<td>attributes<br><code class="prettyprint">optional</code></td>
<td>The attributes hash configures specific components of a metric&rsquo;s visualization.</td>
</tr>
<tr>
<td>composite<br><code class="prettyprint">optional</code></td>
<td>The composite definition. Only used when type is composite.</td>
</tr>
</tbody></table>

<h2 id="delete-a-metric">Delete a Metric</h2>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/metrics</code></p>

<blockquote>
<p>Delete the metrics <code class="prettyprint">cpu</code>, <code class="prettyprint">servers</code> and <code class="prettyprint">reqs</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'names%5B%5D=cpu&amp;names%5B%5D=servers&amp;names%5B%5D=reqs'</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">delete_metrics</span> <span class="ss">:cpu</span><span class="p">,</span> <span class="ss">:servers</span><span class="p">,</span> <span class="ss">:reqs</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">'cpu'</span><span class="p">,</span> <span class="s">'servers'</span><span class="p">,</span> <span class="s">'reqs'</span><span class="p">])</span>
</code></pre>

<blockquote>
<p>Delete all metrics that start with <code class="prettyprint">cpu</code> and end with <code class="prettyprint">.90</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'names=cpu*.90'</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">delete_metrics</span> <span class="ss">names: </span><span class="p">[</span><span class="s2">"cpu*.90"</span><span class="p">]</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content OR 202 Accepted
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: &lt;job-checking URI&gt;  # issued only for 202
</code></pre>

<p>Batch-delete a set of metrics. Both the metrics and all of their measurements will be removed. All data deleted will be unrecoverable, so use this with care.</p>

<p>This route accepts either a list of metric names OR a single pattern which includes wildcards (<code class="prettyprint">*</code>).</p>

<p>If you post measurements to a metric name after deleting the metric, that metric will be re-created as a new metric with measurements starting from that point.</p>

<p>There are two potential success states for this action, either a <code class="prettyprint">204 No Content</code> (all changes are complete) or a <code class="prettyprint">202 Accepted</code>.</p>

<p>A <code class="prettyprint">202</code> will be issued when the metric set is large enough that it cannot be operated on immediately. In those cases a <code class="prettyprint">Location</code>: response header will be included which identifies a <a href="#jobs">Job resource</a> which can be monitored to determine when the operation is complete and if it has been successful.</p>

<aside class="notice">If you have attempted to DELETE a metric but it is still in your metric list, ensure that you are not continuing to submit measurements to the metric you are trying to delete.</aside>

<h3 id="delete-a-metric-by-name">Delete a Metric by Name</h3>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/metrics/:name</code></p>

<blockquote>
<p>Delete the metric named <code class="prettyprint">app_requests</code>.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/app_requests'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">delete_metrics</span> <span class="ss">:app_requests</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">"app_requests"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete the metric identified by :name. This will delete both the metric and all of its measurements.</p>

<p>If you post measurements to a metric name after deleting the metric, that metric will be re-created as a new metric with measurements starting from that point.</p>

<p>If you have attempted to DELETE a metric but it is still in your metric list, ensure that you are not continuing to submit measurements to the metric you are trying to delete.</p>

<h2 id="list-all-metrics">List All Metrics</h2>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/metrics</code></p>

<h3 id="metric-metadata-queries">Metric Metadata Queries</h3>

<blockquote>
<p>List all metrics:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">metrics</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">list_metrics</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response (when there are two total):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_requests"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_requests"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTTP requests serviced by the app per-minute"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"counter"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Requests"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reqs"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cpu_temp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current CPU temperature in Fahrenheit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4 (ruby; 1.9.3p194; x86_64-linux) direct-faraday/0.8.4"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fahrenheit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The endpoint above returns <strong>metadata</strong> containing all of the available metrics recorded in your account.</p>

          <h1 id="metric-attributes">Metric Attributes</h1>

<p>Each metric instance can be configured past the basic name and description through a set of key/values pairs called attributes. These display attributes are particularly useful for configuring the metric visualization. The attributes described below are supported across all metric types.</p>

<p>Each metric supports a top-level parameter on <a href="#update-a-metric-by-name">PUT operations</a> named attributes that comprises a set of key/value pairs.</p>

<p>The following sections list the available metric attributes.</p>

<h2 id="display-attributes">Display Attributes</h2>

<table><thead>
<tr>
<th>Display Attribute</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>color</td>
<td>Sets a default color to prefer when visually rendering the metric. Must be a seven character string that represents the hex code of the color e.g. #52D74C.</td>
</tr>
<tr>
<td>display_max</td>
<td>If a metric has a known theoretical maximum value, set <code class="prettyprint">display_max</code> so that visualizations can provide perspective of the current values relative to the maximum value.</td>
</tr>
<tr>
<td>display_min</td>
<td>If a metric has a known theoretical minimum value, set <code class="prettyprint">display_min</code> so that visualizations can provide perspective of the current values relative to the minimum value.</td>
</tr>
<tr>
<td>display_units_long</td>
<td>A string that identifies the unit of measurement e.g. Microseconds. Typically the long form of <code class="prettyprint">display_units_short</code> and used in visualizations e.g. the Y-axis label on a graph.</td>
</tr>
<tr>
<td>display_units_short</td>
<td>A terse (usually abbreviated) string that identifies the unit of measurement e.g. uS (Microseconds). Typically the short form of <code class="prettyprint">display_units_long</code> and used in visualizations e.g. the tooltip for a point on a graph.</td>
</tr>
<tr>
<td>display_stacked</td>
<td>A boolean value indicating whether or not multiple sources for a metric should be aggregated in a visualization (e.g. stacked graphs). By default counters have display_stacked enabled while gauges have it disabled.</td>
</tr>
<tr>
<td>display_transform</td>
<td>A linear formula that is run on each measurement prior to visualization. Useful for translating between different units (e.g. Fahrenheit -&gt; Celsius) or scales (e.g. Microseconds -&gt; Milliseconds). The formula may only contain: numeric characters, whitespace, parentheses, the letter x, and approved mathematical operators (&rsquo;+&rsquo;, &rsquo;-&rsquo;, &rsquo;<em>&rsquo;, &rsquo;/&rsquo;). The regular expression used is `/^[\dxp()</em>+-\/ ]+$/`. <br><br>The formula is run on each measurement by substituting x with a given measurement&rsquo;s value and p (if present) with the number of seconds in the period the measurement covers. Although you could technically circumvent the lack of an exponential operator by multiplying x by itself (e.g. x*x), <strong>YOU SHOULD NOT DO THIS</strong>. Non-linear functions will not apply correctly against the automatically generated aggregate values meaning any visualization at a resolution other than the raw data stream would be at best garbage and at worst misleading.</td>
</tr>
</tbody></table>

<h2 id="gauge-only-attributes">Gauge-only attributes</h2>

<blockquote>
<p>The following example demonstrates how to set the metric attribute <code class="prettyprint">display_max</code> on the metric temperature.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'attributes[display_max]=150'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  https://metrics-api.librato.com/v1/metrics/temperature
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_metric</span> <span class="ss">:temperature</span><span class="p">,</span> <span class="ss">attributes: </span><span class="p">{</span> <span class="ss">display_max: </span><span class="s1">'150'</span> <span class="p">}</span>
</code></pre>

<blockquote>
<p>For <code class="prettyprint">aggregate</code>, the following example demonstrates how to enable SSA for the metric speed.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'attributes[aggregate]=true'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  https://metrics-api.librato.com/v1/metrics/speed
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_metric</span> <span class="ss">:speed</span><span class="p">,</span> <span class="ss">attributes: </span><span class="p">{</span> <span class="ss">aggregate: </span><span class="s1">'true'</span> <span class="p">}</span>
</code></pre>

<table><thead>
<tr>
<th>Gauge Attribute</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>summarize_function</td>
<td>Determines how to calculate values when rolling up from raw values to higher resolution intervals. Must be one of: &lsquo;average&rsquo;, &#39;sum&rsquo;, &#39;count&rsquo;, &#39;min&rsquo;, &#39;max&rsquo;. If summarize_function is not set the behavior defaults to average.<br><br>If the values of the measurements to be rolled up are: <code class="prettyprint">2</code>, <code class="prettyprint">10</code>, <code class="prettyprint">5</code>:<br><br>* average: <code class="prettyprint">5.67</code><br>* sum: <code class="prettyprint">17</code><br>* count: <code class="prettyprint">3</code><br>* min: <code class="prettyprint">2</code><br>* max: <code class="prettyprint">10</code><br></td>
</tr>
<tr>
<td>aggregate</td>
<td>Enable service-side aggregation for this gauge. When enabled, measurements sent using the same <em>source</em> name will be aggregated into single measurements on an interval defined by the period of the metric. If there is no period defined for the metric then all measurements will be aggregated on a 60-second interval.<br><br>This option takes a value of true or false. If this option is not set for a metric it will default to false.</td>
</tr>
</tbody></table>

          <h1 id="pagination">Pagination</h1>

<p>Many of the resources accessible through the Metrics REST APIs can contain large numbers of results when an INDEX operation is requested. To enable faster page load times and simple browsing of large result sets the APIs support pagination in a consistent fashion across resources.</p>

<h2 id="request-parameters">Request Parameters</h2>

<blockquote>
<p>Request which returns the 2nd 10 metrics (would equal to page 2 where each page displays 10 metrics):</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics?offset=10&amp;length=10'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># pagination not available, use list_metrics() for all metrics</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">list_metrics</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span>
</code></pre>

<blockquote>
<p>Response Code:</p>
</blockquote>
<pre class="highlight plaintext"><code>200
</code></pre>

<blockquote>
<p>Response Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"summarize_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request Latency (mS)"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mS"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x/p"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"gap_detection"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aggregate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span><span class="w">
    </span><span class="nt">"source_lag"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">metrics...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>There are several request parameters that you can use to control the pagination of the results. These apply in a consistent fashion across all paginated resources. All of the following request parameters have default values and are therefore optional:</p>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>offset<br><code class="prettyprint">optional</code></td>
<td>Specifies how many results to skip for the first returned result. Defaults to 0.</td>
</tr>
<tr>
<td>length<br><code class="prettyprint">optional</code></td>
<td>Specifies how many resources should be returned. The maximum permissible (and the default) length is 100.</td>
</tr>
<tr>
<td>orderby<br><code class="prettyprint">optional</code></td>
<td>Order by the specified attribute. Permissible set of orderby attributes and the default value varies with resource type.</td>
</tr>
<tr>
<td>sort<br><code class="prettyprint">optional</code></td>
<td>The sort order in which the results should be ordered. Permissible values are asc (ascending) and desc (descending). Defaults to asc.</td>
</tr>
</tbody></table>

<h2 id="response-parameters">Response Parameters</h2>

<blockquote>
<p>Request to get the third page for the query &ldquo;api&rdquo; where each page has a length of 10 metrics.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  https://metrics-api.librato.com/v1/metrics?name<span class="o">=</span>api&amp;offset<span class="o">=</span>20&amp;limit<span class="o">=</span>10
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># pagination not available, use list_metrics() for all metrics</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">list_metrics</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span>
</code></pre>

<blockquote>
<p>Response Code:</p>
</blockquote>
<pre class="highlight plaintext"><code>200
</code></pre>

<blockquote>
<p>Response Body:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"summarize_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_units_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request Latency (mS)"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_units_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mS"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_by_ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"librato-metrics/0.7.4"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_transform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x/p"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_stacked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"gap_detection"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"aggregate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span><span class="w">
    </span><span class="nt">"source_lag"</span><span class="p">:</span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">metrics...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>All paginated JSON responses contain a top-level element query that contains the following standard response parameters in addition to any additional response parameters specific to that request:</p>

<table><thead>
<tr>
<th>Response Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>length</td>
<td>The maximum number of resources to return in the response.</td>
</tr>
<tr>
<td>offset</td>
<td>The index into the entire result set at which the current response begins. E.g. if a total of 20 resources match the query, and the offset is 5, the response begins with the sixth resource.</td>
</tr>
<tr>
<td>total</td>
<td>The total number of resources owned by the user.</td>
</tr>
<tr>
<td>found</td>
<td>The number of resources owned by the user that satisfy the specified query parameters. found will be less than or equal to total. Additionally if length is less than found, the response is a subset of the resources matching the specified query parameters.</td>
</tr>
</tbody></table>

          <h1 id="spaces">Spaces</h1>

<p>Spaces contain a collection of charts that graph one or more metrics in real time. The API allows you to view
details on Spaces associated with an account. The API allows you to create, modify, and delete Spaces by
referencing the <code class="prettyprint">name</code> or <code class="prettyprint">id</code> of the Space.</p>

<h4 id="space-properties">Space Properties</h4>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Each space has a unique numeric ID</td>
</tr>
<tr>
<td>name</td>
<td>Unique name for space</td>
</tr>
</tbody></table>

<h4 id="pagination-parameters">Pagination Parameters</h4>

<p>The response is paginated, so the request supports our generic <a href="#pagination5">Pagination Parameters</a>. Specific to spaces, the default value of the <code class="prettyprint">orderby</code> pagination parameter is <code class="prettyprint">name</code>, and the permissible values of the <code class="prettyprint">orderby</code> pagination parameter are: <code class="prettyprint">name</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Search by name of the space.</td>
</tr>
</tbody></table>

<h2 id="create-a-space">Create a Space</h2>

<blockquote>
<p>Create a space with name CPUs:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'name=CPUs'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_space</span><span class="p">(</span><span class="s">"CPUs"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Created '</span><span class="si">%</span><span class="s">s'"</span> <span class="o">%</span> <span class="n">space</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Using JSON</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPUs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/spaces/129
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPUs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/spaces</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h2 id="retrieve-a-space">Retrieve a Space</h2>

<blockquote>
<p>Return the details of a Space with ID <code class="prettyprint">129</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/129'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space_info</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_space</span><span class="p">(</span><span class="mi">129</span><span class="p">)</span>
<span class="k">print</span> <span class="n">space_info</span><span class="o">.</span><span class="n">chart_ids</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPUs"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w">
  </span><span class="nt">"charts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">915</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1321</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">47842</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">922</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the details of a specific space.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/spaces/:id</code></p>

<h2 id="update-a-space">Update a Space</h2>

<blockquote>
<p>Change the name of the space to MEMORY:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'name=MEMORY'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/:id'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">find_space</span><span class="p">(</span><span class="s">'CPUs'</span><span class="p">)</span>
<span class="n">space</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MEMORY"</span>
<span class="n">space</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Using JSON</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MEMORY"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Modifies a space by changing its name.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/spaces/:id</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h2 id="delete-space">Delete Space</h2>

<blockquote>
<p>Delete the space with ID <code class="prettyprint">129</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/129'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">delete_space</span><span class="p">(</span><span class="mi">129</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete the space identified by :id.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/spaces/:id</code></p>

<h2 id="list-all-spaces">List all Spaces</h2>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/spaces</code></p>

<blockquote>
<p>Retrieve all spaces:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">spaces</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">list_spaces</span><span class="p">()</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spaces</span><span class="p">:</span>
  <span class="k">print</span> <span class="n">s</span><span class="o">.</span><span class="n">name</span>
</code></pre>

<blockquote>
<p>Return all spaces owned by the user, with name matching ops:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces?name=ops'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">spaces</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">list_spaces</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"ops"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spaces</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"spaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"staging_ops"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns all spaces created by the user.</p>

          <h1 id="charts">Charts</h1>

<p>A charts graphs one or more metrics in real time. In order to create a chart you will first need to build a <a href="#spaces">Space</a>. Each <a href="#spaces">Space</a> accommodates multiple charts.</p>

<h2 id="create-a-chart">Create a Chart</h2>

<blockquote>
<p>Create a line chart with various metric streams including their source(s) and
group/summary functions:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
-u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
-d <span class="s1">'type=line'</span> <span class="se">\</span>
-d <span class="s1">'name=Server Temperature'</span> <span class="se">\</span>
-d <span class="s1">'streams[0][metric]=server_temp'</span> <span class="se">\</span>
-d <span class="s1">'streams[0][source]=app1'</span> <span class="se">\</span>
-d <span class="s1">'streams[1][metric]=environmental_temp'</span> <span class="se">\</span>
-d <span class="s1">'streams[1][source]=*'</span> <span class="se">\</span>
-d <span class="s1">'streams[1][group_function]=breakout'</span> <span class="se">\</span>
-d <span class="s1">'streams[1][summary_function]=average'</span> <span class="se">\</span>
-d <span class="s1">'streams[2][metric]=server_temp'</span> <span class="se">\</span>
-d <span class="s1">'streams[2][source]=%'</span> <span class="se">\</span>
-d <span class="s1">'streams[2][group_function]=average'</span> <span class="se">\</span>
-X POST <span class="se">\</span>
<span class="s1">'https://metrics-api.librato.com/v1/spaces/:id/charts'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_space</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_chart</span><span class="p">(</span>
    <span class="s">'Server Temperature'</span><span class="p">,</span>
    <span class="n">space</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="s">'line'</span><span class="p">,</span>
    <span class="n">streams</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s">'metric'</span><span class="p">:</span> <span class="s">'server_temp'</span><span class="p">,</span> <span class="s">'source'</span><span class="p">:</span> <span class="s">'app1'</span><span class="p">},</span>
        <span class="p">{</span><span class="s">'metric'</span><span class="p">:</span> <span class="s">'environmental_temp'</span><span class="p">,</span> <span class="s">'source'</span><span class="p">:</span> <span class="s">'*'</span><span class="p">,</span>
        <span class="s">'group_function'</span><span class="p">:</span> <span class="s">'average'</span><span class="p">},</span>
        <span class="p">{</span><span class="s">'metric'</span><span class="p">:</span> <span class="s">'server_temp'</span><span class="p">,</span> <span class="s">'source'</span><span class="p">:</span> <span class="s">'</span><span class="si">%</span><span class="s">'</span><span class="p">}])</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/spaces/123
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server Temperature"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"line"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"streams"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server_temp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"environmental_temp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server_temp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"%"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>How to add a composite metric to a chart</p>

<p>NOTE: This will replace existing streams within the specified chart</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u  <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'type=line'</span> <span class="se">\</span>
  -d <span class="s1">'streams[0][composite]=divide([sum(s("memory_total","prod.web*")),sum(s("memory_used","prod.web*"))])'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_space</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">charts</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">chart_ids</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_chart</span><span class="p">(</span><span class="n">charts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">space</span><span class="o">.</span><span class="nb">id</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">new_stream</span><span class="p">(</span><span class="n">composite</span><span class="o">=</span><span class="s">'divide([</span><span class="err">
</span><span class="s">  sum(s("memory_total","prod.web*")),</span><span class="err">
</span><span class="s">  sum(s("memory_used","prod.web*"))])'</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>You can create a new chart with specified metrics or update an existing chart with new metrics to override the chart&rsquo;s existing metrics.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/spaces/:id/charts</code></p>

<h3 id="headers">Headers</h3>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Title of the chart when it is displayed.</td>
</tr>
<tr>
<td>streams</td>
<td>An array of hashes describing the metrics and sources to use for data in the chart.</td>
</tr>
<tr>
<td>type</td>
<td>Indicates the type of chart. Must be one of line, stacked, or bignumber (default to line)</td>
</tr>
<tr>
<td>min</td>
<td>The minimum display value of the chart&rsquo;s Y-axis</td>
</tr>
<tr>
<td>max</td>
<td>The maximum display value of the chart&rsquo;s Y-axis</td>
</tr>
<tr>
<td>label</td>
<td>The Y-axis label</td>
</tr>
<tr>
<td>related_space</td>
<td>The ID of another space to which this chart is related</td>
</tr>
</tbody></table>

<h3 id="stream-properties">Stream Properties</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>metric</td>
<td>Name of metric</td>
</tr>
<tr>
<td>source</td>
<td>Name of source or * to include all sources. This field will also accept specific wildcard entries. For example us-west&ndash;app* will match us-west-21-app but not us-west-12-db. Use % to specify a dynamic source that will be provided after the instrument or dashboard has loaded, or in the URL.</td>
</tr>
<tr>
<td>composite</td>
<td>A composite metric query string to execute when this stream is displayed. This can not be specified with a metric, source or group_function.</td>
</tr>
<tr>
<td>group_function</td>
<td>How to process the results when multiple sources will be returned. Value must be one of: average, sum, min, max, breakout. If average, sum, min, or max, a single line will be drawn representing the function applied over all sources. If the function is breakout, a separate line will be drawn for each source. If this property is not supplied, the behavior will default to average.</td>
</tr>
<tr>
<td>summary_function</td>
<td>When visualizing complex measurements or a rolled-up measurement, this allows you to choose which statistic to use. If unset, defaults to &ldquo;average&rdquo;. Valid options are one of: [max, min, average, sum, count].</td>
</tr>
<tr>
<td>downsample_function</td>
<td>This allows you to choose which statistic to use during <a href="https://www.librato.com/docs/kb/visualize/faq/rollups_retention_resolution.html#roll-ups">roll-ups</a> (for composite metrics only). If unset, defaults to &ldquo;average&rdquo;. Valid options are one of: [max, min, average, sum, count].</td>
</tr>
<tr>
<td>color</td>
<td>Sets a color to use when rendering the stream. Must be a seven character string that represents the hex code of the color e.g. #52D74C.</td>
</tr>
<tr>
<td>name</td>
<td>A display name to use for the stream when generating the tooltip.</td>
</tr>
<tr>
<td>units_short</td>
<td>Unit value string to use as the tooltip label.</td>
</tr>
<tr>
<td>units_long</td>
<td>String value to set as they Y-axis label. All streams that share the same units_long value will be plotted on the same Y-axis.</td>
</tr>
<tr>
<td>min</td>
<td>Theoretical minimum Y-axis value.</td>
</tr>
<tr>
<td>max</td>
<td>Theoretical maximum Y-axis value.</td>
</tr>
<tr>
<td>transform_function</td>
<td>Linear formula to run on each measurement prior to visualization.</td>
</tr>
<tr>
<td>period</td>
<td>An integer value of seconds that defines the period this stream reports at. This aids in the display of the stream and allows the period to be used in stream display transforms.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-chart">Retrieve a Chart</h2>

<blockquote>
<p>Return chart by id and space id.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_chart</span><span class="p">(</span><span class="n">chart_id</span><span class="p">,</span> <span class="n">space_id</span><span class="p">)</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">chart</span><span class="o">.</span><span class="n">streams</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">metric</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">group_function</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">summary_function</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6637</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPU Usage"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"line"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"streams"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">386291</span><span class="p">,</span><span class="w">
      </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collectd.cpu.0.cpu.user"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"counter"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"summary_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"derivative"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns a specific chart by its id and space id.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id</code></p>

<h2 id="update-a-chart">Update a Chart</h2>

<blockquote>
<p>Update a chart name to <code class="prettyprint">Temperature</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'name=Temperature'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_space</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">charts</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">chart_ids</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_chart</span><span class="p">(</span><span class="n">charts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">space</span><span class="o">.</span><span class="nb">id</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">'Temperature'</span>
<span class="n">chart</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Temperature"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"line"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"streams"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"temperature"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"group_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Updates attributes of a specific chart. In order to update the metrics associated with a chart you will need to view the example under <a href="#create-a-chart">Create a Chart</a>, which demonstrates overwriting an existing chart with new metrics.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id</code></p>

<h3 id="headers">Headers</h3>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Title of the chart when it is displayed.</td>
</tr>
<tr>
<td>streams</td>
<td>An array of hashes describing the metrics and sources to use for data in the chart.</td>
</tr>
<tr>
<td>type</td>
<td>Indicates the type of chart. Must be one of line or stacked (default to line)</td>
</tr>
<tr>
<td>min</td>
<td>The minimum display value of the chart&rsquo;s Y-axis</td>
</tr>
<tr>
<td>max</td>
<td>The maximum display value of the chart&rsquo;s Y-axis</td>
</tr>
<tr>
<td>label</td>
<td>The Y-axis label</td>
</tr>
<tr>
<td>related_space</td>
<td>The ID of another space to which this chart is related</td>
</tr>
</tbody></table>

<h3 id="stream-properties">Stream Properties</h3>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>metric</td>
<td>Name of metric</td>
</tr>
<tr>
<td>source</td>
<td>Name of source or * to include all sources. This field will also accept specific wildcard entries. For example us-west&ndash;app* will match us-west-21-app but not us-west-12-db. Use % to specify a dynamic source that will be provided after the instrument or dashboard has loaded, or in the URL.</td>
</tr>
<tr>
<td>composite</td>
<td>A composite metric query string to execute when this stream is displayed. This can not be specified with a metric, source or group_function.</td>
</tr>
<tr>
<td>group_function</td>
<td>How to process the results when multiple sources will be returned. Value must be one of: average, sum, min, max, breakout. If average, sum, min, or max, a single line will be drawn representing the function applied over all sources. If the function is breakout, a separate line will be drawn for each source. If this property is not supplied, the behavior will default to average.</td>
</tr>
<tr>
<td>summary_function</td>
<td>When visualizing complex measurements or a rolled-up measurement, this allows you to choose which statistic to use. If unset, defaults to &ldquo;average&rdquo;. Valid options are one of: [max, min, average, sum, count].</td>
</tr>
<tr>
<td>downsample_function</td>
<td>This allows you to choose which statistic to use during <a href="https://www.librato.com/docs/kb/visualize/faq/rollups_retention_resolution.html#roll-ups">roll-ups</a> (for composite metrics only). If unset, defaults to &ldquo;average&rdquo;. Valid options are one of: [max, min, average, sum, count].</td>
</tr>
<tr>
<td>color</td>
<td>Sets a color to use when rendering the stream. Must be a seven character string that represents the hex code of the color e.g. #52D74C.</td>
</tr>
<tr>
<td>name</td>
<td>A display name to use for the stream when generating the tooltip.</td>
</tr>
<tr>
<td>units_short</td>
<td>Unit value string to use as the tooltip label.</td>
</tr>
<tr>
<td>units_long</td>
<td>String value to set as they Y-axis label. All streams that share the same units_long value will be plotted on the same Y-axis.</td>
</tr>
<tr>
<td>min</td>
<td>Theoretical minimum Y-axis value.</td>
</tr>
<tr>
<td>max</td>
<td>Theoretical maximum Y-axis value.</td>
</tr>
<tr>
<td>transform_function</td>
<td>Linear formula to run on each measurement prior to visualization.</td>
</tr>
<tr>
<td>period</td>
<td>An integer value of seconds that defines the period this stream reports at. This aids in the display of the stream and allows the period to be used in stream display transforms.</td>
</tr>
</tbody></table>

<h2 id="delete-a-chart">Delete a Chart</h2>

<blockquote>
<p>Delete the chart ID 123.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_space</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">charts</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">chart_ids</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_chart</span><span class="p">(</span><span class="n">charts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">space_id</span><span class="p">)</span>
<span class="n">chart</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete the specified chart.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/spaces/:id/charts/:chart_id</code></p>

<h2 id="list-all-charts-in-space">List all Charts in Space</h2>

<blockquote>
<p>List all charts in a Space with ID <code class="prettyprint">129</code>.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/spaces/129/charts'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_space</span><span class="p">(</span><span class="mi">129</span><span class="p">)</span>
<span class="n">charts</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">chart_ids</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">charts</span><span class="p">:</span>
   <span class="n">i</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_chart</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">space</span><span class="o">.</span><span class="nb">id</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">streams</span><span class="p">:</span>
       <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="nb">id</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">metric</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">group_function</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">summary_function</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6637</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPU Usage"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"line"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"streams"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">386291</span><span class="p">,</span><span class="w">
        </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collectd.cpu.0.cpu.user"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"counter"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"group_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"summary_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"derivative"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6638</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Free Memory"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"line"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"streams"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">386292</span><span class="p">,</span><span class="w">
        </span><span class="nt">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collectd.memory.memory.free"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gauge"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"group_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"summary_function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"average"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Return charts for a given space.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/spaces/:id/charts</code></p>

          <h1 id="annotations">Annotations</h1>

<p>Annotations are used to record external events (e.g. a deployment) that typically occur at non-uniform times, yet may impact the behavior of monitored metrics. Each annotation event has an associated time and metadata description. When a set of annotation events are added to a graph, each event is plotted as a single vertical line. This permits a user to correlate operational or business actions to observed metrics.</p>

<p>Every annotation event is associated with a single named annotation stream, analogous to how multiple measurements are associated with the named metric they belong to. For example, you might have an annotation stream named ux-app-deploys to track deployments to your UX application and another annotation stream api-app-deploys to track deploys to your API application. Multiple annotation events can be added to a graph by selecting the name of the annotation stream, similar to selecting a metric name.</p>

<p>An annotation event can also include an end time to represent an event that spanned a duration of time. For example, a batch job that ran for five minutes would set the annotation event&rsquo;s start time when the job started and update the annotation event with an end time when the job completed. Annotation events that include an end time will be displayed with their start and end times as connected vertical lines on graphs.</p>

<h3 id="annotation-streams">Annotation Streams</h3>

<p>Annotation streams group related annotation events into a single timeline. Annotation streams are referenced by their name and are automatically created when an annotation event is POSTed to a new annotation stream name.</p>

<h3 id="annotation-stream-properties">Annotation Stream Properties</h3>

<table><thead>
<tr>
<th>Annotation Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name of the annotation stream.</td>
</tr>
<tr>
<td>display_name</td>
<td>The string used to display this annotation stream.</td>
</tr>
</tbody></table>

<h3 id="annotation-events">Annotation Events</h3>

<p>An annotation event records a single point in time when an external action (like a deployment) occurred. Annotation events can include metadata that describe the particular event in more detail or reference an external site.</p>

<h3 id="annotation-event-properties">Annotation Event Properties</h3>

<table><thead>
<tr>
<th>Annotation Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Each annotation event has a unique numeric ID.</td>
</tr>
<tr>
<td>title</td>
<td>The title of an annotation is a string and may contain spaces. The title should be a short, high-level summary of the annotation e.g. <code class="prettyprint">v45 Deployment</code>. The title is a required parameter to create an annotation.</td>
</tr>
<tr>
<td>source</td>
<td>A string which describes the originating source of an annotation when that annotation is tracked across multiple members of a population. Examples: foo3.bar.com, user-123, 77025.</td>
</tr>
<tr>
<td>description</td>
<td>The description contains extra metadata about a particular annotation. The description should contain specifics on the individual annotation e.g. <code class="prettyprint">Deployed 9b562b2: shipped new feature foo!</code> A description is not required to create an annotation.</td>
</tr>
<tr>
<td>links</td>
<td>An optional list of references to resources associated with the particular annotation. For example, these links could point to a build page in a CI system or a changeset description of an SCM. Each link has a tag that defines the link&rsquo;s relationship to the annotation. See the <a href="#add-link-to-annotation-event">link documentation</a> for details on available parameters.</td>
</tr>
<tr>
<td>start_time</td>
<td>The <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> indicating the the time at which the event referenced by this annotation started. By default this is set to the current time if not specified.</td>
</tr>
<tr>
<td>end_time</td>
<td>The <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> indicating the the time at which the event referenced by this annotation ended. For events that have a duration, this is a useful way to annotate the duration of the event. This parameter is optional and defaults to null if not set.</td>
</tr>
</tbody></table>

<h2 id="create-an-annotation">Create an Annotation</h2>

<blockquote>
<p>Create an annotation event in the app-deploys stream:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'title=Deployed v56&amp;source=foo3.bar.com&amp;description=v56 - Fixed typo in page titles'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/app-deploys'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">annotate</span> <span class="ss">:'app-deploys'</span><span class="p">,</span> <span class="s1">'Deployed v56'</span><span class="p">,</span> <span class="ss">source: </span><span class="s1">'foo3.bar.com'</span><span class="p">,</span>
    <span class="ss">description: </span><span class="s1">'v56 - Fixed typo in page titles'</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">post_annotation</span><span class="p">(</span><span class="s">"app-deploys"</span><span class="p">,</span>
  <span class="n">title</span><span class="o">=</span><span class="s">"Deployed v56"</span><span class="p">,</span>
  <span class="n">source</span><span class="o">=</span><span class="s">"foo3.bar.com"</span><span class="p">,</span>
  <span class="n">description</span><span class="o">=</span><span class="s">"v56 - Fixed typo in page titles"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Create an annotation event at a specific timestamp:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'title=My Annotation&amp;description=Joe deployed v29 to metrics&amp;start_time=1234567890'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/api-deploys'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">annotate</span> <span class="ss">:'app-deploys'</span><span class="p">,</span> <span class="s1">'My Annotation'</span><span class="p">,</span> <span class="ss">source: </span><span class="s1">'foo3.bar.com'</span><span class="p">,</span>
    <span class="ss">start_time: </span><span class="mi">1234567890</span><span class="p">,</span> <span class="ss">description: </span><span class="s1">'Joe deployed v29 to metrics'</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">post_annotation</span><span class="p">(</span><span class="s">"app-deploys"</span><span class="p">,</span>
  <span class="n">title</span><span class="o">=</span><span class="s">"My Annotation"</span><span class="p">,</span>
  <span class="n">source</span><span class="o">=</span><span class="s">"foo3.bar.com"</span><span class="p">,</span>
  <span class="n">start_time</span><span class="o">=</span><span class="s">"1234567890"</span><span class="p">,</span>
  <span class="n">description</span><span class="o">=</span><span class="s">"Joe deployed v29 to metrics"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Create an annotation event with a link:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'title=My Annotation&amp;description=Joe deployed v29 to metrics&amp;start_time=1234567890'</span> <span class="se">\</span>
  -d <span class="s1">'links[0][label]=Metrics Gem'</span> <span class="se">\</span>
  -d <span class="s1">'links[0][href]=https://github.com/librato/librato-metrics'</span> <span class="se">\</span>
  -d <span class="s1">'links[0][rel]=github'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/api-deploys'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">annotate</span> <span class="ss">:'app-deploys'</span><span class="p">,</span> <span class="s1">'My Annotation'</span><span class="p">,</span> <span class="ss">source: </span><span class="s1">'foo3.bar.com'</span><span class="p">,</span>
    <span class="ss">start_time: </span><span class="mi">1234567890</span><span class="p">,</span> <span class="ss">description: </span><span class="s1">'Joe deployed v29 to metrics'</span><span class="p">,</span>
    <span class="ss">links: </span><span class="p">[</span><span class="ss">label: </span><span class="s1">'Metrics Gem'</span><span class="p">,</span> <span class="ss">href: </span><span class="s1">'https://github.com/librato/librato-metrics'</span><span class="p">,</span> <span class="ss">rel: </span><span class="s1">'github'</span><span class="p">]</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">post_annotation</span><span class="p">(</span><span class="s">"app-deploys"</span><span class="p">,</span>
  <span class="n">title</span><span class="o">=</span><span class="s">"My Annotation"</span><span class="p">,</span>
  <span class="n">source</span><span class="o">=</span><span class="s">"foo3.bar.com"</span><span class="p">,</span>
  <span class="n">start_time</span><span class="o">=</span><span class="s">"1234567890"</span><span class="p">,</span>
  <span class="n">description</span><span class="o">=</span><span class="s">"Joe deployed v29 to metrics"</span><span class="p">,</span>
  <span class="n">links</span><span class="o">=</span><span class="p">[{</span><span class="s">'rel'</span><span class="p">:</span> <span class="s">'github'</span><span class="p">,</span> <span class="s">'href'</span><span class="p">:</span> <span class="s">'https://github.com/librato/librato-metrics'</span><span class="p">}])</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/annotations/api-deploys/123
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Annotation"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe deployed v29 to metrics"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
  </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create an annotation event on the given annotation stream <code class="prettyprint">:name</code>. If the annotation stream does not exist, it will be created automatically.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/annotations/:name</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>The title of an annotation is a string and may contain spaces. The title should be a short, high-level summary of the annotation e.g. <code class="prettyprint">v45 Deployment</code>. The title is a required parameter to create an annotation.</td>
</tr>
<tr>
<td>source<br><code class="prettyprint">optional</code></td>
<td>A string which describes the originating source of an annotation when that annotation is tracked across multiple members of a population. Examples: foo3.bar.com, user-123, 77025.</td>
</tr>
<tr>
<td>description<br><code class="prettyprint">optional</code></td>
<td>The description contains extra metadata about a particular annotation. The description should contain specifics on the individual annotation e.g. <code class="prettyprint">Deployed 9b562b2: shipped new feature foo!</code> A description is not required to create an annotation.</td>
</tr>
<tr>
<td>links<br><code class="prettyprint">optional</code></td>
<td>An optional list of references to resources associated with the particular annotation. For example, these links could point to a build page in a CI system or a changeset description of an SCM. Each link has a tag that defines the link&rsquo;s relationship to the annotation. See the <a href="#add-link-to-annotation-event">link documentation</a> for details on available parameters.</td>
</tr>
<tr>
<td>start_time<br><code class="prettyprint">optional</code></td>
<td>The <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> indicating the the time at which the event referenced by this annotation started. By default this is set to the current time if not specified.</td>
</tr>
<tr>
<td>end_time<br><code class="prettyprint">optional</code></td>
<td>The <a href="http://en.wikipedia.org/wiki/Unix_time">unix timestamp</a> indicating the the time at which the event referenced by this annotation ended. For events that have a duration, this is a useful way to annotate the duration of the event. This parameter is optional and defaults to null if not set.</td>
</tr>
</tbody></table>

<h2 id="retrieve-an-annotation">Retrieve an Annotation</h2>

<blockquote>
<p>Return details of the annotation stream name api-deploys.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/api-deploys'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">list</span> <span class="ss">name: </span><span class="p">(</span><span class="s1">'api-deploys'</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_annotation_stream</span><span class="p">(</span><span class="s">"api-deploys"</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="s">"1234500000"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">stream</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>
   <span class="k">print</span> <span class="n">source</span>
   <span class="n">events</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">events</span><span class="p">[</span><span class="n">source</span><span class="p">]</span>
   <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
       <span class="k">print</span> <span class="n">event</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
       <span class="k">print</span> <span class="n">event</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span>
       <span class="k">print</span> <span class="n">event</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span>
</code></pre>

<blockquote>
<p>Specifying a set of <a href="#time-intervals">time interval search parameters</a> will return a list of all annotation events for a stream. For example, to return the set of annotation events on the annotation stream blog-posts between two timestamps and limited to sources <code class="prettyprint">db1.acme</code> and <code class="prettyprint">db2.acme</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/blog-posts?start_time=1234500000&amp;end_time=1234600000&amp;sources%5B%5D=db1.acme&amp;sources%5B%5D=db2.acme'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">fetch</span> <span class="ss">:'blog-posts'</span><span class="p">,</span> <span class="ss">start_time: </span><span class="mi">1234500000</span><span class="p">,</span> <span class="ss">end_time: </span><span class="mi">1234600000</span><span class="p">,</span> <span class="ss">sources: </span><span class="p">[</span><span class="s1">'db1.acme'</span><span class="p">,</span> <span class="s1">'db2.acme'</span><span class="p">]</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_annotation_stream</span><span class="p">(</span><span class="s">"blog-posts"</span><span class="p">,</span>
  <span class="n">start_time</span><span class="o">=</span><span class="s">"1234500000"</span><span class="p">,</span>
  <span class="n">end_time</span><span class="o">=</span><span class="s">"1234600000"</span><span class="p">,</span>
  <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="s">'db1.acme'</span><span class="p">,</span> <span class="s">'db2.acme'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">events</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>

<p>An annotation stream from multiple sources:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api-deploys"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deploys to API"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"unassigned"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">
          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deployed v91"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
          </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Github commit"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"github"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://github.com/org/app/commit/01beaf"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jenkins CI build job"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenkins"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://ci.acme.com/job/api/34"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"foo3.bar.com"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Annotation"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
          </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo3.bar.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1098</span><span class="p">,</span><span class="w">
          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chef run finished"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chef migrated up to SHA 44a87f9"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567908</span><span class="p">,</span><span class="w">
          </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567958</span><span class="p">,</span><span class="w">
          </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo3.bar.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Return a list of annotations associated with given stream name.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/annotations/:name</code></p>

<h4 id="annotation-search-parameters">Annotation Search Parameters</h4>

<p>If optional <a href="#time-intervals">time interval search parameters</a> are specified, the response includes the set of annotation events with start times that are covered by the time interval. Annotation events are always returned in order by their start times.</p>

<p>Annotation events are grouped by their originating source name if one was specified when the annotation event was created. All annotation events that were created without an explicit source name are listed with the source name <code class="prettyprint">unassigned</code>.</p>

<p>Annotation events can be further restricted by the following search parameters:</p>

<table><thead>
<tr>
<th>Search Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>sources</td>
<td>An array of source names to limit the search to. Can include source name wildcards like <code class="prettyprint">db-*</code> to show annotations from all db sources.</td>
</tr>
</tbody></table>

<h2 id="retrieve-an-annotation-event">Retrieve an Annotation Event</h2>

<blockquote>
<p>Lookup the annotation event 189 in the annotation stream <code class="prettyprint">api-deploys</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/metrics/annotations/api-deploys/189'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">fetch</span> <span class="ss">:'api-deploys'</span><span class="p">,</span> <span class="ss">start_time: </span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span><span class="o">-</span><span class="mi">3600</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">189</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deployed v91"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
  </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Github commit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"github"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://github.com/org/app/commit/01beaf"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jenkins CI build job"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenkins"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://ci.acme.com/job/api/34"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Return annotation event details associated with given stream name.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/annotations/:name/:id</code></p>

<h2 id="update-an-annotation">Update an Annotation</h2>

<blockquote>
<p>Add a link to github to the annotation event 198 in the <em>app-deploys</em> stream:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'rel=github&amp;label=Github Commit&amp;href=https://github.com/acme/app/commits/01beaf'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/app-deploys/198/links'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">fetch</span> <span class="ss">:'app-deploys'</span><span class="p">,</span> <span class="ss">start_time: </span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span><span class="o">-</span><span class="mi">3600</span><span class="p">),</span> <span class="ss">end_time: </span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span><span class="p">),</span> <span class="ss">sources: </span><span class="p">[</span><span class="s1">'db1.acme'</span><span class="p">,</span> <span class="s1">'db2.acme'</span><span class="p">]</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/annotations/app-deploys/198/links/github
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"github"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Github Commit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/acme/app/commits/01beaf"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Add a link to a specific annotation event.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/annotations/:name/:id/links</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>rel</td>
<td>Defines the relationship of the link. A link&rsquo;s relationship must be unique within a single annotation event.</td>
</tr>
<tr>
<td>href</td>
<td>The link URL.</td>
</tr>
<tr>
<td>label<br><code class="prettyprint">optional</code></td>
<td>A display label for the link.</td>
</tr>
</tbody></table>

<h3 id="update-an-annotation-stream-attributes">Update an Annotation Stream Attributes</h3>

<blockquote>
<p>Update the display name of the annotation stream api-deploys:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'display_name=Deploys to API'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/api-deploys'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Update the attributes of an annotation stream.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/annotations/:name</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="annotation-stream-parameters">Annotation Stream Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>display_name</td>
<td>Name used to display the annotation stream.</td>
</tr>
</tbody></table>

<h3 id="update-annotation-event-metadata">Update Annotation Event Metadata</h3>

<blockquote>
<p>Update the description of the annotation 143 in the stream <code class="prettyprint">app-deploys</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'description=Deployed git SHA 601060a68ff2e'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/app-deploys/143'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">update_event</span> <span class="ss">:app</span><span class="o">-</span><span class="n">deploys</span><span class="p">,</span> <span class="mi">143</span><span class="p">,</span> <span class="ss">description: </span><span class="s1">'Deployed git SHA 601060a68ff2e'</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Update the metadata of an annotation event.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/annotations/:name/:id</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="annotation-event-parameters">Annotation Event Parameters</h4>

<p>The following parameters can be updated.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>Short description of annotation event.</td>
</tr>
<tr>
<td>description</td>
<td>Long description of annotation event.</td>
</tr>
<tr>
<td>end_time</td>
<td>Sets an end time for annotation events that occurred over a duration.</td>
</tr>
<tr>
<td>links</td>
<td>An optional list of references to resources associated with the particular annotation. For example, these links could point to a build page in a CI system or a changeset description of an SCM. Each link has a tag that defines the link\&rsquo;s relationship to the annotation.</td>
</tr>
</tbody></table>

<h2 id="delete-an-annotation">Delete an Annotation</h2>

<blockquote>
<p>Delete the annotation stream api-deploys</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/api-deploys'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">delete</span> <span class="ss">:api</span><span class="o">-</span><span class="n">deploys</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">delete_annotation_stream</span><span class="p">(</span><span class="s">"api-deploys"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete an annotation stream. This will delete all annotation events associated with the stream.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/annotations/:name</code></p>

<h3 id="delete-an-annotation-event">Delete an Annotation Event</h3>

<blockquote>
<p>Delete the annotation event 123 in the annotation stream app-deploys:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/app-deploys/123'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">delete_event</span> <span class="ss">:api</span><span class="o">-</span><span class="n">deploys</span><span class="p">,</span> <span class="mi">123</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete an annotation event.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/annotations/:name/:id</code></p>

<h3 id="delete-link-from-annotation-event">Delete Link From Annotation Event</h3>

<blockquote>
<p>Delete the link with the relationship github from the annotation event 189 in the annotation stream app-deploys:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations/app-deploys/189/links/github'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete a link from an annotation event.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/annotations/:name/:id/links/:link</code></p>

<h2 id="list-all-annotations">List all Annotations</h2>

<blockquote>
<p>Return all annotation streams:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">list</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">stream</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">list_annotation_streams</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Return all annotation streams matching the name <code class="prettyprint">api</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/annotations?name=api'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="o">::</span><span class="no">Annotator</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">list</span> <span class="ss">name: </span><span class="p">(</span><span class="s1">'api'</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">stream</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">list_annotation_streams</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"api"</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body (all annotation streams)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api-deploys"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deploys to API"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-deploys"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deploys to UX app"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Return a list of annotation streams.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/annotations</code></p>

<h4 id="pagination-parameters">Pagination Parameters</h4>

<p>The response is paginated, so the request supports our generic <a href="#pagination5">Pagination Parameters</a>. Specific to annotation streams, the default value of the <code class="prettyprint">orderby</code> pagination parameter is <code class="prettyprint">name</code>, and the permissible values of the <code class="prettyprint">orderby</code> pagination parameter are: <code class="prettyprint">name</code>.</p>

          <h1 id="alerts">Alerts</h1>

<p>Alerts are used to build actionable responses to changes in metric measurements. Alerts define conditions on the input measurements and are triggered when the value(s) of the input measurements cross a threshold or stop reporting. For example, an alert could be used to notify an administrator that response time for a given service is elevated above an acceptable range.</p>

<aside class="notice">Our alerts endpoints currently support two versions of the alert data model. Version 2 supports our latest alerting features. Version 1 is legacy & deprecated.</aside>

<h2 id="the-alert-object">The Alert Object</h2>

<h3 id="alerts-properties">Alerts Properties</h3>

<table><thead>
<tr>
<th>Alert Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Each alert has a unique numeric ID.</td>
</tr>
<tr>
<td>name</td>
<td>A unique name used to identify the alert. Must be 255 or fewer characters, and may only consist of <code class="prettyprint">A-Za-z0-9.:-</code>. Dotted decimal notation (e.g. <code class="prettyprint">production.web.frontend.responsetime</code>) is recommended.</td>
</tr>
<tr>
<td>version</td>
<td>Optional. Identifies the alert as v1 or v2. Defaults to &lsquo;2&rsquo;. For v1 alerts (deprecated) this must be submitted as &#39;1&rsquo;.</td>
</tr>
<tr>
<td>conditions</td>
<td>An array of conditions hashes (properties described in the <a href="#alerts">overview</a>). NOTE: conditions are required for PUT operations.</td>
</tr>
<tr>
<td>services</td>
<td>An array of <a href="#services">services</a> to notify for this alert (sent as list of IDs).</td>
</tr>
<tr>
<td>attributes</td>
<td>A key-value hash of metadata for the alert (described in alert attributes).</td>
</tr>
<tr>
<td>description</td>
<td>A string describing this alert.</td>
</tr>
<tr>
<td>active</td>
<td>Boolean: identifies whether the alert is active (can be triggered). Defaults to true.</td>
</tr>
<tr>
<td>rearm_seconds</td>
<td>Specifies the minimum amount of time between sending alert notifications, in seconds. A notification will be sent once the alert is triggered, and then will not be sent again until the rearm timer has elapsed, even if more measurements are received that would trigger the alert. Required to be a multiple of 60, and when unset or null will default to 600 (10 minutes).</td>
</tr>
</tbody></table>

<h3 id="alert-conditions">Alert Conditions</h3>

<p>Each alert can have multiple alert conditions, each of which specifies a state which must be met for the alert to fire. Note an alert will fire when ALL alert conditions are met, not when a single condition is met.</p>

<p>We currently support three alert condition types:</p>

<table><thead>
<tr>
<th>Condition</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>above</td>
<td>Condition is met when the stream (metric/source pair) goes above the specified threshold.</td>
</tr>
<tr>
<td>absent</td>
<td>Condition is met when the stream does not send a measurement for duration seconds.</td>
</tr>
<tr>
<td>below</td>
<td>Condition is met when the stream goes below the specified threshold.</td>
</tr>
</tbody></table>

<p>All alert conditions have the following properties:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>One of above, absent, or below.</td>
</tr>
<tr>
<td>metric_name</td>
<td>The name of the metric this alert condition applies to.</td>
</tr>
<tr>
<td>source<br><code class="prettyprint">optional</code></td>
<td>A source expression which identifies which sources for the given metric to monitor. If not specified all sources will be monitored. Wildcards can be used here (e.g. prod-* will include all sources that begin with prod-).</td>
</tr>
<tr>
<td>detect_reset</td>
<td><em>boolean</em>: If the summary_function is &ldquo;derivative&rdquo;, this toggles the method used to calculate the delta from the previous sample. When set to &ldquo;false&rdquo; (default), the delta is calculated as simple subtraction of current - previous. <br><br>If &ldquo;true&rdquo; only increasing (positive) values will be reported. Any time the current value is less than the previous it is considered a reset of the counter and a derivative of zero is reported. This field is ignored for any setting of summary_function other than &ldquo;derivative&rdquo;.</td>
</tr>
</tbody></table>

<p>Additional properties for the &#39;above&rsquo; alert condition type:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>threshold</td>
<td>float: measurements over this number will fire the alert.</td>
</tr>
<tr>
<td>summary_function<br><code class="prettyprint">optional</code></td>
<td>string: Indicates which statistic of an aggregated measurement to alert on. <br><br>For gauge metrics will default to &ldquo;average&rdquo;, which is also the &ldquo;value&rdquo; of non-complex or un-aggregated measurements. If set, must be one of: [min, max, average, sum, count, derivative]. See <a href="#instruments">Instrument Stream Property summary_function</a> for more details. <br><br>For counter metrics will default to &ldquo;derivative&rdquo;, which is the delta between the most recent measurement and the one before it. If set, must be one of: [derivative, absolute_value].</td>
</tr>
<tr>
<td>duration</td>
<td><em>integer</em>: Number of seconds that data for the specified metric/source combination must be above the threshold for before the condition is met. All data points within the given duration must be above the threshold to meet this condition. This avoids a single spike from triggering the condition. <br><br>If unset, a single sample above the threshold will trigger the condition. The tracking duration begins with samples received after the alert condition is created or updated. Must be &gt;= 60 seconds and &lt;= 3600 seconds.</td>
</tr>
</tbody></table>

<p>Additional properties for the &#39;absent&rsquo; alert condition type:</p>

<table><thead>
<tr>
<th>Alert Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>duration</td>
<td><em>integer</em>: How many seconds data for the specified metric/source combination must not be missing before the condition is met. This will only trigger for a given metric/source combination after a measurement has been seen at least once. Must be &gt;= 60 seconds and &lt;= 3600 seconds. (Required)</td>
</tr>
</tbody></table>

<p>Additional properties for the &#39;below&rsquo; alert condition type:</p>

<table><thead>
<tr>
<th>Alert Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>threshold</td>
<td><em>float</em>: measurements below this number will fire the alert. (Required)</td>
</tr>
<tr>
<td>summary_function</td>
<td><em>string</em>: Indicates which statistic of an aggregated measurement to alert on. <br><br>For gauge metrics will default to &ldquo;average&rdquo;, which is also the &ldquo;value&rdquo; of non-complex or un-aggregated measurements. If set, must be one of: [min, max, average, sum, count, derivative]. See <a href="instruments">Instrument Stream Property</a> <code class="prettyprint">summary_function</code> for more details. <br><br>For counter metrics will default to &ldquo;derivative&rdquo;, which is the delta between the most recent measurement and the one before it. If set, must be one of: [derivative, absolute_value].</td>
</tr>
<tr>
<td>duration</td>
<td><em>integer</em>: Number of seconds that data for the specified metric/source combination must be below the threshold for before the condition is met. All data points within the given duration must be below the threshold to meet this condition. This avoids a single drop from triggering the condition. <br><br>If unset, a single sample below the threshold will trigger the condition. The tracking duration begins with samples received after the alert condition is created or updated. Must be &gt;= 60 seconds and &lt;= 3600 seconds.</td>
</tr>
</tbody></table>

<h4 id="alert-attributes">Alert Attributes</h4>

<p>The attributes field on the alert accepts an optional map of key-value pairs and allows metadata to be associated with the alert. Some keys are used for special behavior:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>runbook_url</td>
<td>a URL for the runbook to be followed when this alert is firing. Used in the Librato UI if set.</td>
</tr>
</tbody></table>

<p>Attributes can be unset by excluding their key when updating an alert.</p>

<h2 id="create-an-alert">Create an Alert</h2>

<blockquote>
<p>Create an alert named <code class="prettyprint">production.web.frontend.response_time</code> with one condition which monitors the <code class="prettyprint">metric web.nginx.response_time</code> and alerts whenever the value goes over 200.</p>

<p>When the alert is triggered, the service identified by ID 849 (a Slack channel in this case) will be notified.</p>
</blockquote>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">alert</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_alert</span><span class="p">(</span><span class="s">"production.web.frontend.response_time"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">add_condition_for</span><span class="p">(</span><span class="s">'web.nginx.response_time'</span><span class="p">)</span><span class="o">.</span><span class="n">above</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">add_service</span><span class="p">(</span><span class="s">"849"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c">#alternatively (trigger if max value is over 200 for 5min):</span>
<span class="n">alert</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_alert</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">"production.web.frontend.response_time"</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">"Web Response Time"</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">services</span><span class="o">=</span><span class="p">[</span><span class="s">"849"</span><span class="p">],</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">{</span><span class="s">"runbook_url"</span><span class="p">:</span><span class="s">"http://mydomain.com/wiki/whattodo"</span><span class="p">},</span>
    <span class="n">conditions</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s">"metric_name"</span><span class="p">:</span><span class="s">'web.nginx.response_time'</span><span class="p">,</span>
        <span class="s">"condition_type"</span><span class="p">:</span><span class="s">'above'</span><span class="p">,</span>
        <span class="s">"threshold"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span>
        <span class="s">"summary_function"</span><span class="p">:</span><span class="s">'max'</span><span class="p">,</span>
        <span class="s">"duration"</span><span class="p">:</span><span class="mi">300</span><span class="p">}])</span>
</code></pre>

<blockquote>
<p>JSON Request used to create alert:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production.web.frontend.response_time"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"above"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"metric_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web.nginx.response_time"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">849</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"runbook_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://myco.com/runbooks/response_time"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/alerts/123
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production.web.frontend.response_time"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"above"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"metric_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web.nginx.response_time"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">849</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notify Slack Channel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"slack"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"runbook_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://myco.com/runbooks/response_time"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create an alert by setting the condition array parameters by providing a <code class="prettyprint">metric_name</code>, <code class="prettyprint">threshold</code>, and condition <code class="prettyprint">type</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/alerts</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>A unique name used to identify the alert. Must be 255 or fewer characters, and may only consist of &#39;A-Za-z0-9.:-&rsquo;. Dotted decimal notation (e.g. <em>production.web.frontend.responsetime</em>) is recommended.</td>
</tr>
<tr>
<td>version</td>
<td>Optional. Can be set to <code class="prettyprint">1</code> or <code class="prettyprint">2</code> and dictates whether to return v1 (deprecated) or v2 alerts. If unspecified, v2 alerts will be returned.</td>
</tr>
<tr>
<td>conditions</td>
<td>An array of conditions hashes (properties described in the <a href="#alerts">overview</a>).<br><br>NOTE: Conditions are required for PUT operations.</td>
</tr>
<tr>
<td>services</td>
<td>An array of <a href="#services">services</a> to notify for this alert (sent as list of IDs).</td>
</tr>
<tr>
<td>attributes<br><code class="prettyprint">optional</code></td>
<td>A key-value hash of metadata for the alert (described in alert attributes).</td>
</tr>
<tr>
<td>description<br><code class="prettyprint">optional</code></td>
<td>A string describing this alert.</td>
</tr>
<tr>
<td>active<br><code class="prettyprint">optional</code></td>
<td>Boolean: identifies whether the alert is active (can be triggered). Defaults to true.</td>
</tr>
<tr>
<td>rearm_seconds<br><code class="prettyprint">optional</code></td>
<td>Specifies the minimum amount of time between sending alert notifications, in seconds. A notification will be sent once the alert is triggered, and then will not be sent again until the rearm timer has elapsed, even if more measurements are received that would trigger the alert. Required to be a multiple of 60, and when unset or null will default to 600 (10 minutes).</td>
</tr>
</tbody></table>

<h2 id="retrieve-an-alert">Retrieve an Alert</h2>

<blockquote>
<p>Return alert with the <code class="prettyprint">id</code> 123</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/123'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">alerts</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">list_alerts</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">"123"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">alerts</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production.web.frontend.response_time"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"above"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"metric_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web.nginx.response_time"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">849</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notify Slack Channel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"slack"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"runbook_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://myco.com/runbooks/response_time"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Return all alerts owned by the user with <code class="prettyprint">production</code> in the name:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts?name=production'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">alerts</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">list_alerts</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"production"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">alerts</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production.web.frontend.response_time"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"above"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
          </span><span class="nt">"metric_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web.nginx.response_time"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">849</span><span class="p">,</span><span class="w">
          </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notify Slack Channel"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"slack"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"runbook_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://myco.com/runbooks/response_time"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Return the details of an alert (or group of alerts) by providing the <code class="prettyprint">id</code> or <code class="prettyprint">name</code>.</p>

<h3 id="retrieve-status-of-specific-alert">Retrieve Status of Specific Alert</h3>

<blockquote>
<p>Return the status for alert ID <code class="prettyprint">120</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/120/status'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response for an alert that is triggered:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"triggered"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response for an alert that is not triggered:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the status for a particular alert, specified by ID.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/alerts/:alert_id/status</code></p>

<h2 id="update-an-alert">Update an Alert</h2>

<blockquote>
<p>NOTE: This method requires the conditions hash. If conditions is not included in the payload, the alert conditions will be removed.</p>

<p>To disable an alert:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"active": false, "name": "my.alert.name", "description": "Process went down", "conditions": [{"type": "absent", "metric_name": "service.alive", "source": "*", "duration": 900}]}'</span> <span class="se">\</span>
<span class="s2">"https://metrics-api.librato.com/v1/alerts/123"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">alert</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_alert</span><span class="p">(</span><span class="s">"my.alert.name"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="s">"false"</span>
<span class="n">alert</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>To enable an alert:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"active": true, "name": "my.alert.name", "description": "Process went down", "conditions": [{"type": "absent", "metric_name": "service.alive", "source": "*", "duration": 900}]}'</span> <span class="se">\</span>
<span class="s2">"https://metrics-api.librato.com/v1/alerts/123"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">alert</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_alert</span><span class="p">(</span><span class="s">"my.alert.name"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="s">"true"</span>
<span class="n">alert</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Update the description of an alert:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"description": "A new description", "name": "my.alert.name", "conditions": [{"type": "absent", "metric_name": "service.alive", "source": "*", "duration": 900}], "active": true}'</span> <span class="se">\</span>
<span class="s2">"https://metrics-api.librato.com/v1/alerts/123"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">alert</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_alert</span><span class="p">(</span><span class="s">"my.alert.name"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">"A new description"</span>
<span class="n">alert</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Update the runbook URL for an alert:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"attributes": {"runbook_url": "http://google.com"}, "name": "my.alert.name", "description": "A process went down.", "conditions": [{"type": "absent", "metric_name": "service.alive", "source": "*", "duration": 900}], "active": true}'</span> <span class="se">\</span>
<span class="s2">"https://metrics-api.librato.com/v1/alerts/123"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Update the specified alert.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/alerts/:id</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>A unique name used to identify the alert. Must be 255 or fewer characters, and may only consist of <code class="prettyprint">A-Za-z0-9.:-</code>. Dotted decimal notation (e.g. <code class="prettyprint">production.web.frontend.responsetime</code>) is recommended.</td>
</tr>
<tr>
<td>version</td>
<td>Optional. Identifies the alert as v1 or v2. Defaults to &#39;2&rsquo;. For v1 alerts (deprecated) this must be submitted as &#39;1&rsquo;.</td>
</tr>
<tr>
<td>conditions</td>
<td>An array of conditions hashes (properties described in the <a href="#alerts">overview</a>). NOTE: conditions are required for PUT operations.</td>
</tr>
<tr>
<td>services</td>
<td>An array of <a href="#services">services</a> to notify for this alert (sent as list of IDs).</td>
</tr>
<tr>
<td>attributes<br><code class="prettyprint">optional</code></td>
<td>A key-value hash of metadata for the alert (described in alert attributes).</td>
</tr>
<tr>
<td>description<br><code class="prettyprint">optional</code></td>
<td>A string describing this alert.</td>
</tr>
<tr>
<td>active<br><code class="prettyprint">optional</code></td>
<td>Boolean: identifies whether the alert is active (can be triggered). Defaults to true.</td>
</tr>
<tr>
<td>rearm_seconds<br><code class="prettyprint">optional</code></td>
<td>Specifies the minimum amount of time between sending alert notifications, in seconds. A notification will be sent once the alert is triggered, and then will not be sent again until the rearm timer has elapsed, even if more measurements are received that would trigger the alert. Required to be a multiple of 60, and when unset or null will default to 600 (10 minutes).</td>
</tr>
</tbody></table>

<h2 id="notification-services">Notification Services</h2>

<p>Librato provides many <a href="https://www.librato.com/docs/kb/alert/alerts-intro.html#notification-services">notification services</a> to alert your team by when an alert is triggered. At least one (but not lmiited to one) service must be tied to each alert.</p>

<h3 id="associate-a-service-with-an-alert">Associate a Service with an Alert</h3>

<blockquote>
<p>Add the service identified by <code class="prettyprint">ID 290</code> to the alert &ldquo;my.alert.name&rdquo; (ID <code class="prettyprint">45</code>). When the alert is triggered, the service <code class="prettyprint">290</code> will be notified.</p>

<p>Note: To get a list of created services, view the section on <a href="#retrieve-all-services">Retrieving all services</a>.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'service=290'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/45/services'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
<span class="n">alert</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_alert</span><span class="p">(</span><span class="s">"my.alert.name"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">add_service</span><span class="p">(</span><span class="s">"290"</span><span class="p">)</span>
<span class="n">alert</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/alerts/45/services/209
</code></pre>

<p>Associates a single service with the alert identified by <code class="prettyprint">:alert_id</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/alerts/:id/services</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<p>This route accepts a single parameter <code class="prettyprint">service</code> that should be set to the ID of the <a href="#services">service</a> to associate with this alert.</p>

<h3 id="remove-a-service-from-an-alert">Remove a Service from an Alert</h3>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/alerts/:alert_id/services/:id</code></p>

<blockquote>
<p>Remove service 209 from alert 123. From then on when alert 123 is triggered, the service 209 will no longer be triggered.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/123/services/209'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Remove the service identified by <code class="prettyprint">:id</code> from the alert identified by <code class="prettyprint">:alert_id</code>.</p>

<h2 id="resolve-an-alert">Resolve an Alert</h2>

<blockquote>
<p>Resolve alert ID <code class="prettyprint">120</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/120/clear'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Clears the alert specified using the alert <code class="prettyprint">id</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/alerts/:alert_id/clear</code></p>

<h2 id="delete-alert">Delete Alert</h2>

<blockquote>
<p>Delete the alert <code class="prettyprint">id</code> 123</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/123'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">delete_alert</span><span class="p">(</span><span class="s">"alert_name"</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete an alert by specifying a unique <code class="prettyprint">id</code> or <code class="prettyprint">name</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/alerts/:id</code></p>

<h2 id="list-all-alerts">List all Alerts</h2>

<blockquote>
<p>List the status of all alerts:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/alerts/status'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"cleared"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"cleared_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1454108320</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">127</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"firing"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">106</span><span class="p">,</span><span class="w">
            </span><span class="nt">"triggered_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1413328283</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w">
            </span><span class="nt">"triggered_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1444934147</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns a list of alert ids, grouped by those belonging to alerts which are in a triggered state and by those that have recently cleared.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/alerts</code></p>

<h4 id="pagination-parameters">Pagination Parameters</h4>

<p>The response is paginated, so the request supports our generic <a href="#pagination5">Pagination Parameters</a>. Specific to alerts, the default value of the <code class="prettyprint">orderby</code> pagination parameter is <code class="prettyprint">updated_at</code>, and the permissible values of the <code class="prettyprint">orderby</code> pagination parameter are: <code class="prettyprint">updated_at</code>.</p>

<h4 id="other-parameters">Other Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>version</td>
<td>Optional. Can be set to <code class="prettyprint">1</code> or <code class="prettyprint">2</code> and dictates whether to return v1 (deprecated) or v2 alerts. If unspecified, v2 alerts will be returned.</td>
</tr>
<tr>
<td>name</td>
<td>A search parameter that limits the results to metrics whose names contain a matching substring. Search is case-insensitive.</td>
</tr>
</tbody></table>

          <h1 id="api-tokens">API Tokens</h1>

<p>API Tokens are used for authenticating with the API. They are used in combination with your normal login as part of a standard HTTP Basic Auth payload. See <a href="#authentication">Authentication</a> for more details on how to authenticate to the API with a token.</p>

<p>You may have as many API Tokens as you like to help limit your exposure to single compromised token. If you happen to accidentally lose control of a token by emailing it or pasting it on a website, it is convenient to deactivate or delete that token, rendering it inoperable for authentication, without interfering with the operation of other agents or clients using other tokens. We recommend having as many API Tokens as is convenient for each client or group of clients to have their own.</p>

<h4 id="api-token-properties">API Token Properties</h4>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>A name for the API Token. There is no limit on length or uniqueness, so use whatever naming scheme makes it easiest for you to keep them organized. Name may be <code class="prettyprint">null</code> for any legacy or auto generated tokens, but it is required for any new tokens created.</td>
</tr>
<tr>
<td>token</td>
<td>A long random string of characters to be used as the &ldquo;password&rdquo; segment of the basic auth header. This is auto-generated, and any attempt to set it will be ignored.</td>
</tr>
<tr>
<td>active</td>
<td>A true/false value indicating the ability of a Token to be used for authentication. Attempting to authenticate using a token that has active set to false will result in a 401 response.</td>
</tr>
<tr>
<td>role</td>
<td>The name of the role that encapsulates the permissions this token has. Must be one of: &ldquo;admin&rdquo;, &ldquo;recorder&rdquo;, or &ldquo;viewer&rdquo;. See the <a href="https://www.librato.com/docs/kb/librato/account_management/tokens.html">Knowledge Base Article</a> for more details.</td>
</tr>
</tbody></table>

<h2 id="create-a-token">Create a Token</h2>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/api_tokens</code></p>

<blockquote>
<p>Create a new API Token by specifying the <code class="prettyprint">name</code> and <code class="prettyprint">role</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'name=My New Token&amp;role=admin'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/api_tokens'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Using JSON</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My New Token"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/api_tokens/28
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My New Token"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24f9fb2134399595b91da1dcac39cb6eafc68a07fa08ad3d70892b7aad10e1cf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.librato.dev/v1/api_tokens/28"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Creates a new API Token.</p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h2 id="retrieve-a-token">Retrieve a Token</h2>

<blockquote>
<p>Retrieve a token that contains the word &ldquo;token&rdquo; within the <code class="prettyprint">name</code> parameter:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/api_tokens?name=*token*'</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"api_tokens"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token for collectors"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24f9fb2134399595b91da1dcac39cb6eafc68a07fa08ad3d70892b7aad10e1cf"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recorder"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://metrics-api.librato.com/v1/api_tokens/28"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token that has been disabled"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"viewer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://metrics-api.librato.com/v1/api_tokens/29"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1ffbbbe327c6839a71023c2a8c9ba921207e32e427a49fb221843d74d63f7b8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:54:28 UTC"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:54:28 UTC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
    </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the details for API Tokens that match a name. Supports wildcards,
e.g. <code class="prettyprint">? name=*token*</code>. Omitting a wild card will automatically add them, so
querying <code class="prettyprint">?name=foo.bar</code> will return <code class="prettyprint">foo.bar</code> and <code class="prettyprint">foo.bar.bazzle</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/api_tokens/:name</code></p>

<h3 id="retrieve-a-token-by-id">Retrieve a Token by ID</h3>

<blockquote>
<p>Retrieve the token with the <code class="prettyprint">id</code> 28:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/api_tokens/28'</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My New Token"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24f9fb2134399595b91da1dcac39cb6eafc68a07fa08ad3d70892b7aad10e1cf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.librato.dev/v1/api_tokens/28"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the details for a specific API Token by providing the <code class="prettyprint">id</code> of the token. The <code class="prettyprint">id</code> can be found in the URL of the <code class="prettyprint">href</code> parameter provided when <a href="#list-all-tokens">listing all API tokens</a>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/api_tokens/:id</code></p>

<h2 id="update-a-token">Update a Token</h2>

<blockquote>
<p>Update the token associated with the <code class="prettyprint">id</code> 28:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'name=New Token Name&amp;active=false&amp;role=admin'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/api_tokens/28'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Token Name"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24f9fb2134399595b91da1dcac39cb6eafc68a07fa08ad3d70892b7aad10e1cf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.librato.dev/v1/api_tokens/28"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 19:51:22 UTC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Modify an API Token, such as changing the name, or flagging as active/inactive.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/api_tokens/:id</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h2 id="delete-a-token">Delete a Token</h2>

<blockquote>
<p>Delete the API token with ID <code class="prettyprint">28</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/api_tokens/28'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete the API Token identified by <code class="prettyprint">:id</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/api_tokens/:id</code></p>

<h2 id="list-all-tokens">List all Tokens</h2>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/api_tokens'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"api_tokens"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b593b3dff7cef442268c3056625981b92d5feb622cfe23fef8d716d5eecd2c3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://metrics-api.librato.com/v1/api_tokens/2"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-01-22 18:08:15 UTC"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-01-22 18:08:15 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token for collectors"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24f9fb2134399595b91da1dcac39cb6eafc68a07fa08ad3d70892b7aad10e1cf"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recorder"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://metrics-api.librato.com/v1/api_tokens/28"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:53:38 UTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token that has been disabled"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"viewer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://metrics-api.librato.com/v1/api_tokens/29"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1ffbbbe327c6839a71023c2a8c9ba921207e32e427a49fb221843d74d63f7b8"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:54:28 UTC"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-01 18:54:28 UTC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns all API Tokens.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/api_tokens</code></p>

          <h1 id="jobs">Jobs</h1>

<p>Some resources in the Librato API allow you to make requests which will take longer to complete than is reasonable for a single request-response cycle. These resources will respond with a job which you can use to follow progress and final state of the request.</p>

<p>Requests which start jobs will respond with an HTTP status code of <code class="prettyprint">202 Accepted</code>. They will also include the URI to query for job status as a <code class="prettyprint">Location:</code> response header.</p>

<h4 id="job-properties">Job Properties</h4>

<p>Jobs can be queried for their current state and other status information. They have the following properties:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Each job has a unique numeric ID.</td>
</tr>
<tr>
<td>state</td>
<td>Reflects the current status of the job, will be one of <code class="prettyprint">queued</code>, <code class="prettyprint">working</code>, <code class="prettyprint">complete</code> <code class="prettyprint">failed</code>, or <code class="prettyprint">canceled</code>.</td>
</tr>
<tr>
<td>progress<br><code class="prettyprint">optional</code></td>
<td>a floating point number from <code class="prettyprint">0.0-100.0</code> reflecting how close to completion the job is currently.</td>
</tr>
<tr>
<td>output<br><code class="prettyprint">optional</code></td>
<td>if the job results in output it will be available in this field.</td>
</tr>
<tr>
<td>errors<br><code class="prettyprint">optional</code></td>
<td>if the job results in any errors they will be available in this field.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-job">Retrieve a Job</h2>

<blockquote>
<p>Check status for job qith the <code class="prettyprint">id</code> 123456:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/jobs/123456'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response properties may vary depending on the state of the job. Some jobs may only report <code class="prettyprint">id</code> and <code class="prettyprint">state</code>, so you are encouraged to consider <code class="prettyprint">state</code> authoritative rather than relying on the presence of other properties (<code class="prettyprint">errors</code> or <code class="prettyprint">progress</code> for example).</p>

<p>Job in progress:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"working"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"progress"</span><span class="p">:</span><span class="w"> </span><span class="mf">31.56</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Job which has completed successfully:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"progress"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>A queued job which has not started yet:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queued"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>A job that has failed:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"is invalid"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns information for a specific job. All jobs will return their <code class="prettyprint">id</code> and <code class="prettyprint">state</code>. Some jobs may also return one or more <a href="#jobs">optional properties</a>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/jobs/:id</code></p>

<h4 id="about-jobs">About Jobs</h4>

<p>Jobs are spawned by other resources in the Librato API when an operation will take longer to complete than is allowed by a single request-response cycle.</p>

          <h1 id="snapshots">Snapshots</h1>

<p>Snapshots provide the ability to capture a point-in-time image of a given chart as a PNG file to share with collaborators via email and/or chat applications such as Slack, Campfire, HipChat, and Flowdock.</p>

<h4 id="snapshot-properties">Snapshot Properties</h4>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>href</td>
<td>A link to the representation of the snapshot.</td>
</tr>
<tr>
<td>job_href</td>
<td>A link to the representation of the <a href="#jobs">background job</a> created to process the snapshot.</td>
</tr>
<tr>
<td>image_href</td>
<td>A link to the PNG file of the snapshot. Initially <code class="prettyprint">null</code> until background job has processed rendering.</td>
</tr>
<tr>
<td>duration</td>
<td>Time interval of the snapshot, in seconds.</td>
</tr>
<tr>
<td>end_time</td>
<td>Time indicating the end of the interval.</td>
</tr>
<tr>
<td>created_at</td>
<td>Time the snapshot was created.</td>
</tr>
<tr>
<td>updated_at</td>
<td>Time the snapshot was updated.</td>
</tr>
<tr>
<td>subject</td>
<td>The subject <a href="#retrieve-a-chart">chart</a> of the snapshot.</td>
</tr>
</tbody></table>

<h2 id="create-a-snapshot">Create a Snapshot</h2>

<blockquote>
<p>Create a snapshot of a stacked chart associated with the <code class="prettyprint">id</code> of 1:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'subject[chart][id]=1&amp;subject[chart][source]=*&amp;subject[chart][type]=stacked'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/snapshots'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>202 Accepted
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/snapshots/:id
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://metrics-api.librato.com/v1/snapshots/1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"job_href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://metrics-api.librato.com/v1/jobs/123456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"image_href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snapshots.librato.com/chart/tuqlgn1i-71569.png"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-20T01:18:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-20T01:18:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-20T01:18:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"chart"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"*"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stacked"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a new snapshot by providing the subject parameters (associated with the chart). The parameters of the <code class="prettyprint">chart</code> array include <code class="prettyprint">id</code>, <code class="prettyprint">source</code>, and chart <code class="prettyprint">type</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/snapshots</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>subject</td>
<td>The subject <a href="#retrieve-a-chart">chart</a> of the snapshot, e.g., <code class="prettyprint">{&quot;chart&quot;:{&quot;id&quot;: 1, &quot;source&quot;: &quot;*&quot;, &quot;type&quot;: &quot;stacked&quot;}}</code>.</td>
</tr>
<tr>
<td>duration<br><code class="prettyprint">optional</code></td>
<td>Time interval over which to take the snapshot, in seconds. Defaults to 3600 (1 hour).</td>
</tr>
<tr>
<td>end_time<br><code class="prettyprint">optional</code></td>
<td>Time indicating the end of the interval. Defaults to present.</td>
</tr>
</tbody></table>

<h4 id="subject-parameters">Subject Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Each chart has a unique numeric ID.</td>
</tr>
<tr>
<td>source</td>
<td>Indicates the <a href="#sources">source</a> of data for the chart. Wildcard <code class="prettyprint">*</code> to include all sources.</td>
</tr>
<tr>
<td>type</td>
<td>Indicates the type of chart. One of <code class="prettyprint">line</code>, <code class="prettyprint">stacked</code> or <code class="prettyprint">bignumber</code>.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-snapshot">Retrieve a Snapshot</h2>

<blockquote>
<p>Return the snapshot with the <code class="prettyprint">id</code> 1.</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/snapshots/1'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://metrics-api.librato.com/v1/snapshots/1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"job_href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://metrics-api.librato.com/v1/jobs/123456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"image_href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snapshots.librato.com/chart/tuqlgn1i-71569.png"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nt">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-20T01:18:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-20T01:18:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-20T01:18:46Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"chart"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"*"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stacked"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns a specific snapshot associated with an <code class="prettyprint">id</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/snapshots/:id</code></p>

          <h1 id="services">Services</h1>

<p>Services define the actions that are taken when an alert is triggered. Example actions might include: sending an email, notifying a real-time chat room, or hitting an external web hook with a POST.</p>

<p>A single service can be shared across multiple alerts. This allows for a single service to be configured and reused on multiple alerts without having to copy the service details. Similarly, a single alert can notify multiple services of the same type. For example, a single alert could notify multiple real-time chat rooms.</p>

<p>Each service is chosen from a set of supported back end services. The supported services are implemented in the <a href="https://www.librato.com/docs/kb/alert/alerts-intro.html#notification-services">Librato Services</a> Github repository. Users are encouraged to contribute new services.</p>

<h4 id="service-properties">Service Properties</h4>

<table><thead>
<tr>
<th>Property</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Each service has a unique numeric ID.</td>
</tr>
<tr>
<td>type</td>
<td>The service type (e.g. Campfire, Pagerduty, mail, etc.). See an extensive list of <a href="https://www.librato.com/docs/kb/alert/alerts-intro.html#notification-services">services here</a>.</td>
</tr>
<tr>
<td>settings</td>
<td>Hash of settings specific to the service type.</td>
</tr>
<tr>
<td>title</td>
<td>Display title for the service.</td>
</tr>
</tbody></table>

<h4 id="pagination-parameters">Pagination Parameters</h4>

<p>The response is paginated, so the request supports our generic <a href="#pagination5">Pagination Parameters</a>. Specific to services, the default value of the <code class="prettyprint">orderby</code> pagination parameter is <code class="prettyprint">title</code>, and the permissible values of the <code class="prettyprint">orderby</code> pagination parameter are: <code class="prettyprint">title</code> and <code class="prettyprint">updated_at</code>.</p>

<h2 id="create-a-service">Create a Service</h2>

<blockquote>
<p>Create a service that notifies the campfire room Ops:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'title=Notify Ops Room&amp;type=campfire&amp;settings%5Btoken%5D=1234567890ABCDEF&amp;settings%5Broom%5D=Ops&amp;settings%5Bsubdomain%5D=acme'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/services'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/services/145
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"145"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campfire"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"room"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ops"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890ABCDEF"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subdomain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acme"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notify Ops Room"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Creates a notification service for alerts to notify by when triggered. View the <a href="https://www.librato.com/docs/kb/alert/alerts-intro.html#notification-services">support documentation</a> for a full list of supported services. Once created you will need to <a href="#notification-services">associate a service with an alert</a> in order for an alert to trigger it.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://metrics-api.librato.com/v1/services</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>Display title for the service.</td>
</tr>
<tr>
<td>type</td>
<td>The service type (e.g. Campfire, Pagerduty, mail, etc.). See an extensive list of <a href="https://github.com/librato/librato-services/tree/master/services">services here</a>.</td>
</tr>
<tr>
<td>settings</td>
<td>Hash of settings specific to the service type.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-service">Retrieve a Service</h2>

<blockquote>
<p>Return the service <code class="prettyprint">156</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/services/156'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"156"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mail"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="s2">"george@example.com,fred@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email ops team"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the specific service associated to the provided service <code class="prettyprint">id</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/services/:id</code></p>

<h2 id="update-a-service">Update a Service</h2>

<blockquote>
<p>Update the title for service <code class="prettyprint">145</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'title=Notify Ops Chatroom'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/services/145'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Updates a service by specifying the service <code class="prettyprint">id</code>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/services/:id</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>Display title for the service.</td>
</tr>
<tr>
<td>type</td>
<td>The service type (e.g. Campfire, Pagerduty, mail, etc.). See an extensive list of <a href="https://github.com/librato/librato-services/tree/master/services">services here</a>.</td>
</tr>
<tr>
<td>settings</td>
<td>Hash of settings specific to the service type.</td>
</tr>
</tbody></table>

<h2 id="delete-a-service">Delete a Service</h2>

<blockquote>
<p>Delete the service <code class="prettyprint">145</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/services/145'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="n">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<p>Delete the service referenced by <code class="prettyprint">:id</code>. It will automatically be removed from any alert that is currently using it.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://metrics-api.librato.com/v1/services/:id</code></p>

<h2 id="list-all-services">List all Services</h2>

<blockquote>
<p>Return all services:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/services'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">librato</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">librato</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span><span class="p">)</span>
<span class="n">services</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">list_services</span><span class="p">()</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">services</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">settings</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>

<p>All services (when there are two total):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"145"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campfire"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"room"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ops"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890ABCDEF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"subdomain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acme"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notify Ops Room"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"156"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mail"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="s2">"george@example.com,fred@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email ops team"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns a list of outbound services that are created within the user&rsquo;s account.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/services</code></p>

          <h1 id="sources">Sources</h1>

<p>When submitting a measurement to Librato, in addition to specifying the metric name you can optionally specify a source name as additional metadata. This is useful when you are tracking the same metrics across a set of homogeneous entities.</p>

<p>For example, you can specify the server instances in a cluster (source name =&gt; hostname) or sensors in a grid (source name =&gt; MAC address).</p>

<p>For more information on sources and how they can be leveraged, check out <a href="https://www.librato.com/docs/kb/faq/whats_a_source.html">this knowledge base article</a>.</p>

<h4 id="source-properties">Source Properties</h4>

<table><thead>
<tr>
<th>Properties</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>The name of the source.</td>
</tr>
<tr>
<td>display_name</td>
<td>Human readable name to use in place of the actual source name. Maximum length 255 characters.</td>
</tr>
</tbody></table>

<h2 id="create-a-source">Create a Source</h2>

<blockquote>
<p>Update an existing source <code class="prettyprint">i-d32d61af</code> by setting the <code class="prettyprint">display_name</code> to <code class="prettyprint">web-frontend-0</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'display_name=web-frontend-0'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/sources/i-d32d61af'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">update_source</span> <span class="s2">"i-d32d61af"</span><span class="p">,</span> <span class="ss">display_name: </span><span class="s2">"web-frontend-0"</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>204 No Content
</code></pre>

<blockquote>
<p>Create a source name <code class="prettyprint">foo.bar.com</code> (assumes this source does not exist):</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -d <span class="s1">'display_name=FooBar'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/sources/foo.bar.com'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Not</span> <span class="n">available</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>201 Created
</code></pre>

<blockquote>
<p>Response Headers</p>
</blockquote>
<pre class="highlight plaintext"><code>Location: /v1/sources/foo.bar.com
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.bar.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FooBar"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Creates or updates the source identified by <code class="prettyprint">:name</code>. If the source name does not exist, the source will be created with the associated properties. If the source already exists, properties will be updated.</p>

<p>Typically sources are created the first time a measurement for a given source is sent to the <a href="#create-a-metric">collated POST route</a>.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://metrics-api.librato.com/v1/sources/:name</code></p>

<h4 id="headers">Headers</h4>

<p>This specifies the format of the data sent to the API.</p>

<p>For HTML (default):</p>

<p><code class="prettyprint">Content-Type: application/x-www-form-urlencoded</code></p>

<p>For JSON:</p>

<p><code class="prettyprint">Content-Type: application/json</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Each metric has a name that is unique to its class of metrics e.g. a gauge name must be unique amongst gauges. The name identifies a metric in subsequent API calls to store/query individual measurements and can be up to 255 characters in length. Valid characters for metric names are <code class="prettyprint">A-Za-z0-9.:-_</code>. The metric namespace is case insensitive.</td>
</tr>
<tr>
<td>display_name<br><code class="prettyprint">optional</code></td>
<td>Human readable name to use in place of the actual source name. Maximum length 255 characters.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-source">Retrieve a Source</h2>

<blockquote>
<p>Return the source named <code class="prettyprint">foo.bar.com</code>:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/sources/foo.bar.com'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">get_source</span> <span class="s2">"foo.bar.com"</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.bar.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FooBar"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the current representation of the source identifed by name.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/sources/:name</code></p>

<h2 id="list-all-sources">List all Sources</h2>

<blockquote>
<p>Return all sources:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/sources'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">sources</span>
</code></pre>

<blockquote>
<p>Return all sources owned by the user with name matching example:</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
  -i <span class="se">\</span>
  -u <span class="nv">$LIBRATO_USERNAME</span>:<span class="nv">$LIBRATO_TOKEN</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  <span class="s1">'https://metrics-api.librato.com/v1/sources?name=example'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s2">"librato/metrics"</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">authenticate</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
<span class="no">Librato</span><span class="o">::</span><span class="no">Metrics</span><span class="p">.</span><span class="nf">sources</span> <span class="ss">name: </span><span class="s2">"example"</span>
</code></pre>

<blockquote>
<p>Response Code</p>
</blockquote>
<pre class="highlight plaintext"><code>200 OK
</code></pre>

<blockquote>
<p>Response Body</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"found"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod.example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stg1.example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Staging 1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stg2.example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Staging 2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.bar.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Source"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns all sources created by the user.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://metrics-api.librato.com/v1/sources</code></p>

<h4 id="pagination-parameters">Pagination Parameters</h4>

<p>The response is paginated, so the request supports our generic <a href="#pagination5">Pagination Parameters</a>. Specific to sources, the default value of the <code class="prettyprint">orderby</code> pagination parameter is name, and the permissible values of the <code class="prettyprint">orderby</code> pagination parameter are: <code class="prettyprint">name</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Searches both the names and display_names of the source. Case-insensitive.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-12975738-6', 'auto');
    ga('send', 'pageview');

    </script>
    <script type="text/javascript">
    !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
    analytics.load("s6cf6j7fqwf0w52tree9");

    }}();
    </script>
    <script>
    window.intercomSettings = {
      app_id: "i5t8536a"
    };
    window.intercomSettings.widget = {
          activator: "#IntercomDefaultWidget"
      };
    </script>
    <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/i5t8536a';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
  </body>
</html>
